# 测试用例库 (Test Cases)

> **文档版本**: v1.0
> **创建日期**: 2025-12-30
> **维护团队**: QA团队

---

## 📋 测试用例统计

| 模块 | 功能用例 | 异常用例 | 边界用例 | 性能用例 | 总计 |
|------|---------|---------|---------|---------|------|
| **对话管理** | 35 | 15 | 10 | 5 | 65 |
| **客户管理** | 25 | 10 | 8 | 3 | 46 |
| **知识库管理** | 30 | 12 | 8 | 5 | 55 |
| **质检功能** | 28 | 10 | 7 | 5 | 50 |
| **任务管理** | 20 | 8 | 5 | 3 | 36 |
| **报表中心** | 15 | 5 | 5 | 5 | 30 |
| **合计** | **153** | **60** | **43** | **26** | **282** |

---

## 1. 对话管理测试用例

### 1.1 对话列表查询

| 用例ID | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|--------|---------|---------|---------|---------|--------|
| TC-CONV-001 | 查询所有对话 | 已登录 | 1. 进入对话列表页<br>2. 不设置任何筛选条件 | 显示所有对话，按时间倒序 | P0 |
| TC-CONV-002 | 按状态筛选对话 | 已登录 | 1. 选择状态="活跃"<br>2. 点击查询 | 仅显示状态为活跃的对话 | P0 |
| TC-CONV-003 | 按客服筛选对话 | 已登录 | 1. 选择客服="张三"<br>2. 点击查询 | 仅显示分配给张三的对话 | P0 |
| TC-CONV-004 | 搜索对话 | 已登录 | 1. 输入客户名称"李四"<br>2. 点击搜索 | 显示客户名包含"李四"的对话 | P0 |
| TC-CONV-005 | 分页查询 | 已登录，有50+对话 | 1. 设置每页10条<br>2. 点击第2页 | 显示第11-20条对话 | P0 |

### 1.2 创建对话

| 用例ID | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|--------|---------|---------|---------|---------|--------|
| TC-CONV-010 | 创建飞书对话 | 已登录 | 1. 点击"新建对话"<br>2. 选择渠道=飞书<br>3. 填写客户信息<br>4. 提交 | 对话创建成功，状态=待分配 | P0 |
| TC-CONV-011 | 创建企微对话 | 已登录 | 1. 选择渠道=企微<br>2. 填写客户信息<br>3. 提交 | 对话创建成功 | P0 |
| TC-CONV-012 | 缺少客户信息 | 已登录 | 1. 不填写客户名<br>2. 提交 | 提示"客户名称必填" | P1 |
| TC-CONV-013 | 自动分配对话 | 已登录，启用自动分配 | 1. 创建新对话 | 自动分配给负载最低的客服 | P1 |

### 1.3 对话分配

| 用例ID | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|--------|---------|---------|---------|---------|--------|
| TC-CONV-020 | 手动分配对话 | 已登录，有未分配对话 | 1. 选择对话<br>2. 点击"分配"<br>3. 选择客服<br>4. 确认 | 对话分配成功，状态变为"进行中" | P0 |
| TC-CONV-021 | 重复分配校验 | 已登录，对话已分配 | 1. 对已分配对话再次分配 | 提示"对话已分配" | P1 |
| TC-CONV-022 | 对话转派 | 已登录，对话已分配 | 1. 选择已分配对话<br>2. 点击"转派"<br>3. 选择新客服<br>4. 填写原因<br>5. 确认 | 对话转派成功，发送通知 | P0 |
| TC-CONV-023 | 批量分配 | 已登录，多个未分配对话 | 1. 多选对话<br>2. 批量分配 | 所有对话分配成功 | P1 |

### 1.4 对话消息

| 用例ID | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|--------|---------|---------|---------|---------|--------|
| TC-CONV-030 | 发送文本消息 | 对话进行中 | 1. 输入文本<br>2. 点击发送 | 消息发送成功，实时显示 | P0 |
| TC-CONV-031 | 发送图片 | 对话进行中 | 1. 点击图片按钮<br>2. 选择图片<br>3. 发送 | 图片上传并发送成功 | P0 |
| TC-CONV-032 | 消息实时接收 | 对话进行中 | 客户发送消息 | 消息实时显示在对话窗口 | P0 |
| TC-CONV-033 | 历史消息加载 | 对话有100+消息 | 1. 进入对话<br>2. 向上滚动 | 自动加载更早的消息 | P1 |
| TC-CONV-034 | 消息搜索 | 对话有多条消息 | 1. 输入关键词<br>2. 搜索 | 高亮显示匹配消息 | P2 |

### 1.5 对话关闭

| 用例ID | 用例名称 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
|--------|---------|---------|---------|---------|--------|
| TC-CONV-040 | 正常关闭对话 | 对话进行中 | 1. 点击"关闭对话"<br>2. 选择关闭原因<br>3. 确认 | 对话状态变为"已关闭" | P0 |
| TC-CONV-041 | 自动关闭超时对话 | 对话24小时无消息 | 系统自动检测 | 对话自动关闭 | P1 |
| TC-CONV-042 | 重新打开已关闭对话 | 对话已关闭 | 1. 客户再次发消息 | 对话重新激活 | P1 |

---

## 2. 客户管理测试用例

### 2.1 客户列表查询

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-CUST-001 | 查询所有客户 | 显示所有客户，按注册时间倒序 | P0 |
| TC-CUST-002 | 按等级筛选 | 仅显示VIP客户 | P0 |
| TC-CUST-003 | 按来源渠道筛选 | 仅显示飞书客户 | P1 |
| TC-CUST-004 | 搜索客户 | 模糊匹配姓名/手机/邮箱 | P0 |

### 2.2 客户详情

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-CUST-010 | 查看客户画像 | 显示360度客户信息 | P0 |
| TC-CUST-011 | 查看对话历史 | 显示该客户所有对话记录 | P0 |
| TC-CUST-012 | 查看订单历史 | 显示客户订单列表 | P1 |
| TC-CUST-013 | 查看投诉记录 | 显示客户投诉历史 | P1 |

### 2.3 客户分级

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-CUST-020 | VIP自动升级 | 消费满¥10,000自动升级VIP | P0 |
| TC-CUST-021 | VIP手动标记 | 管理员可手动设置VIP | P1 |
| TC-CUST-022 | 流失预警 | 180天无联系显示预警标识 | P2 |

---

## 3. 知识库管理测试用例

### 3.1 知识CRUD

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-KB-001 | 创建知识 | 知识创建成功，状态=待审核 | P0 |
| TC-KB-002 | 编辑知识 | 知识更新成功 | P0 |
| TC-KB-003 | 删除知识 | 知识删除成功（软删除） | P0 |
| TC-KB-004 | 批量导入知识 | Excel批量导入成功 | P1 |

### 3.2 知识搜索

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-KB-010 | 关键词搜索 | 按关键词匹配标题和内容 | P0 |
| TC-KB-011 | 语义检索 | 根据语义相似度排序 | P0 |
| TC-KB-012 | 分类筛选 | 仅显示选定分类的知识 | P1 |
| TC-KB-013 | 标签筛选 | 仅显示包含特定标签的知识 | P1 |

### 3.3 知识质量评分

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-KB-020 | 自动评分 | 根据引用次数/满意度/解决率自动计算 | P1 |
| TC-KB-021 | 低质量知识标记 | 评分<60分显示预警 | P2 |

---

## 4. 质检功能测试用例

### 4.1 自动质检

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-QA-001 | 对话结束后自动质检 | InspectorAgent自动评分 | P0 |
| TC-QA-002 | 五维度评分 | 响应速度/专业性/友好度/合规性/解决能力 | P0 |
| TC-QA-003 | 违规检测 | 检测8类违规行为 | P0 |
| TC-QA-004 | 质检报告生成 | 生成详细质检报告 | P0 |

### 4.2 人工抽检

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-QA-010 | 随机抽检 | 每日随机抽检10%对话 | P1 |
| TC-QA-011 | 异议申诉 | 客服可对低分申诉 | P1 |
| TC-QA-012 | 复审 | InspectorAgent重新评估 | P1 |

---

## 5. 性能测试用例

### 5.1 API性能

| 用例ID | 用例名称 | 性能指标 | 优先级 |
|--------|---------|---------|--------|
| TC-PERF-001 | 对话列表查询 | P95 <200ms，1000并发 | P0 |
| TC-PERF-002 | 消息发送 | P95 <300ms，1000并发 | P0 |
| TC-PERF-003 | 知识检索 | P95 <500ms，500并发 | P0 |
| TC-PERF-004 | Agent调用 | P95 <3秒，100并发 | P0 |

### 5.2 稳定性测试

| 用例ID | 用例名称 | 性能指标 | 优先级 |
|--------|---------|---------|--------|
| TC-STAB-001 | 7×24小时稳定性 | 无内存泄漏，可用性>99.95% | P0 |
| TC-STAB-002 | 峰值流量测试 | 3000并发无崩溃 | P0 |

---

## 6. 安全测试用例

### 6.1 认证授权

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-SEC-001 | 未登录访问 | 返回401 Unauthorized | P0 |
| TC-SEC-002 | Token过期 | 返回401，提示重新登录 | P0 |
| TC-SEC-003 | 越权访问 | 返回403 Forbidden | P0 |

### 6.2 输入验证

| 用例ID | 用例名称 | 预期结果 | 优先级 |
|--------|---------|---------|--------|
| TC-SEC-010 | SQL注入防护 | 恶意SQL被拦截 | P0 |
| TC-SEC-011 | XSS防护 | 脚本被转义 | P0 |
| TC-SEC-012 | 文件上传限制 | 仅允许jpg/png/pdf，<10MB | P0 |

---

## 📞 相关文档

- [测试策略](./TEST_STRATEGY.md) - 测试方法和流程
- [非功能需求](../prd/2-baseline/5-nonfunctional/Non-Functional-Requirements.md) - 性能要求

---

**文档维护者**: QA团队
**最后更新**: 2025-12-30
