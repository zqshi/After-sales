## 2.5 需求检测功能

> **PRD格式**: Feature PRD (8章标准格式)
> **优先级**: P1 (重要功能)
> **所属版本**: v1.0
> **最后更新**: 2026-01-14

### 实现状态（当前基础设施对齐）

- 需求识别依赖后端MCP工具 `detectRequirement`，需求落库依赖 `createRequirement`。
- 需求趋势图与统计需要前端埋点 + 报表链路支持，当前为规划项。

---

### 第1章：功能概述

#### 1.1 功能定位

**需求检测**用于从对话中识别需求文本并形成需求卡片，支撑产品团队收集需求与趋势分析。

**核心价值**:
- ✅ 自动识别需求文本
- ✅ 快速生成需求卡片
- ✅ 需求状态跟踪与统计

#### 1.2 目标用户

| 用户角色 | 使用场景 | 核心需求 |
|---------|---------|---------|
| 产品经理 | 收集需求 | 快速了解需求要点 |
| 客服人员 | 记录需求 | 一键生成需求卡片 |

#### 1.3 功能范围

**本期范围**:
- 对话触发需求扫描
- 需求创建/忽略
- 状态筛选与统计
- 需求趋势图
- 入口：输入框上方快捷入口 + 右侧AI辅助面板

**不在本期范围**:
- 需求自动分类与相似度合并
- 需求投票与热度
- 需求与路线图关联

---

### 第2章：用户场景

#### 场景1：对话触发需求检测

**用户旅程**:
```
1. 客服与客户对话
2. 系统识别需求关键词并生成需求卡片
3. 在“需求检测”面板中创建或忽略
```

#### 场景2：产品经理查看趋势

**用户旅程**:
```
1. 打开“需求检测”面板
2. 查看需求统计图表
3. 按状态筛选与查看详情
```

---

### 第3章：功能详细设计

#### 3.1 入口与面板

- 输入框上方快捷入口“需求检测”
- 右侧AI辅助面板展示需求列表与统计

#### 3.2 需求列表

- 卡片展示：需求内容、创建人、客户、时间、状态
- 操作：创建/忽略/查看详情

#### 3.3 统计区

- 需求数量趋势
- 状态分布

---

### 第4章：交互设计

- 支持一键创建与忽略
- 支持状态筛选

---

### 第5章：数据模型

```typescript
interface RequirementItem {
  id: string;
  content: string;
  status: '待处理' | '处理中' | '已完成' | '已拒绝';
  timestamp: string;
  customer?: string;
  createdBy?: string;
}
```

---

### 第6章：业务规则

- 需求卡片必须保留来源对话标识
- 状态变更需记录时间

---

### 第7章：非功能需求

- 需求列表加载 < 500ms
- 筛选响应 < 300ms

---

### 第8章：验收标准

- [ ] 自动识别需求并生成卡片
- [ ] 创建/忽略可用
- [ ] 统计图表可展示
- [ ] 快捷入口可打开面板

---

**文档结束**
