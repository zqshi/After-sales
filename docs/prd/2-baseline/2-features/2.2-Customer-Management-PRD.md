## 2.2 客户管理功能

> **PRD格式**: Feature PRD (8章标准格式)
> **优先级**: P0 (核心功能)
> **所属版本**: v0.5+ (基础CRM) → v0.8+ (智能画像)

---

### 第1章：功能概述

#### 1.1 功能定位

**客户管理**为客服提供完整的客户信息视图，支持客户画像、历史记录、标签管理等功能。

**核心价值**:
- ✅ 360度客户画像（基础信息+交互历史+标签）
- ✅ 客户分级管理（VIP/普通/新客户）
- ✅ 客户历史追溯（对话/订单/任务）
- ✅ 智能客户洞察（偏好分析、风险预警）

#### 1.2 功能范围

**v0.5基础功能**:
- 客户列表与搜索
- 客户详情页（基础信息+历史记录）
- 客户标签管理
- 客户备注

**v0.8智能功能**:
- 客户画像分析
- 客户分群
- 客户流失预警
- 客户价值评分

---

### 第2章：用户场景

#### 场景1: 查看客户完整信息

**用户旅程**:
```
1. 对话中点击客户名称 → 进入客户详情页
2. 查看基础信息（姓名、手机、邮箱、等级）
3. 查看交互历史（对话5次、订单3笔、任务2个）
4. 查看客户标签（老客户、硬件产品、多次故障）
5. 查看AI洞察（偏好：喜欢电话沟通、建议：主动关怀）
6. 添加备注："客户对产品质量比较在意，需耐心解答"
```

---

### 第3章：功能详细设计

#### 3.1 客户列表

```
┌──────────────────────────────────────────────────────────────────┐
│ 客户管理 (1,250)     🔍搜索  ▼筛选  ▼排序  [➕新建客户]          │
├──────────────────────────────────────────────────────────────────┤
│ ⭐ 张三  138****5678  VIP  [老客户] [硬件产品]    最近联系:今天  │
│    对话5次 | 订单3笔 | 总消费:¥15,000                            │
│    [查看详情] [发起对话]                                          │
│                                                                  │
│ ☐ 李四  139****1234  普通  [新客户]              最近联系:3天前 │
│    对话2次 | 订单1笔 | 总消费:¥3,000                             │
│    [查看详情] [发起对话]                                          │
│                                                                  │
│ ... (显示20个客户)                                                │
└──────────────────────────────────────────────────────────────────┘
```

**筛选维度**:
- 客户等级: VIP/普通/全部
- 客户状态: 活跃/沉默/流失
- 注册时间: 今天/本周/本月/全部
- 标签: 按标签筛选
- 消费金额: ¥0-1千/1千-1万/1万+

---

#### 3.2 客户详情页

```
┌─────────────────────────────────────────────────────────────────────┐
│ ← 返回列表    客户: 张三 (VIP)                     [编辑] [删除]    │
├─────────────────────────────────────────────────────────────────────┤
│ 📋 基础信息    📊 数据统计    💬 历史对话    📦 订单记录    🔖 标签  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│ 📋 基础信息                                                          │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ 姓名: 张三                      等级: VIP ⭐                     │ │
│ │ 手机: 138****5678               邮箱: zhang***@example.com      │ │
│ │ 注册时间: 2024-01-15            来源: 飞书                       │ │
│ │ 所在地: 北京市朝阳区             行业: 互联网                     │ │
│ └─────────────────────────────────────────────────────────────────┘ │
│                                                                     │
│ 📊 数据统计                                                          │
│ ┌──────────────┬──────────────┬──────────────┬──────────────┐     │
│ │ 对话次数      │ 订单数量      │ 总消费        │ 满意度        │     │
│ │ 5次          │ 3笔          │ ¥15,000      │ 4.8/5.0      │     │
│ └──────────────┴──────────────┴──────────────┴──────────────┘     │
│                                                                     │
│ 🔖 客户标签                                                          │
│ [老客户] [硬件产品] [多次故障] [对质量敏感] [+添加标签]             │
│                                                                     │
│ 💡 AI洞察                                                            │
│ • 偏好: 喜欢电话沟通，回复速度较快                                   │
│ • 特征: 关注产品质量，对技术细节感兴趣                               │
│ • 建议: 近期咨询频繁，建议主动关怀                                   │
│ • ⚠️ 风险: 最近3次对话涉及故障，有流失风险                           │
│                                                                     │
│ 📝 备注                                                              │
│ 客户对产品质量比较在意，需要耐心解答技术问题。                       │
│ 上次承诺3天后回访确认新设备使用情况。                               │
│ [编辑备注]                                                           │
└─────────────────────────────────────────────────────────────────────┘
```

---

#### 3.3 历史记录

```
┌─────────────────────────────────────────────────────────────────┐
│ 💬 历史对话 (5次)                                                │
├─────────────────────────────────────────────────────────────────┤
│ 📍 2025-12-30 10:00  故障咨询  ✅已解决  客服:李四  满意度:5分   │
│    问题: 产品报错E101                                            │
│    方案: 远程协助重装驱动，确认硬件故障后换货                     │
│    [查看详情]                                                    │
│                                                                 │
│ 📍 2025-12-27 15:30  使用咨询  ✅已解决  客服:张三  满意度:5分   │
│    问题: 如何设置自动备份                                        │
│    方案: 提供设置指南，客户已成功配置                             │
│    [查看详情]                                                    │
│                                                                 │
│ ... (显示全部5次对话)                                            │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ 📦 订单记录 (3笔)                                                │
├─────────────────────────────────────────────────────────────────┤
│ 订单号: ORD-20251201  ¥8,000  已完成  2025-12-01               │
│ 商品: 智能硬件设备V2 × 1                                         │
│                                                                 │
│ 订单号: ORD-20250815  ¥5,000  已完成  2025-08-15               │
│ 商品: 智能硬件设备V1 × 1                                         │
│                                                                 │
│ ... (显示全部3笔订单)                                            │
└─────────────────────────────────────────────────────────────────┘
```

---

### 第4章：交互设计

#### 4.1 快速添加客户

```
┌──────────────────────────────────────┐
│ 新建客户                              │
├──────────────────────────────────────┤
│ 姓名: [________________]  *必填       │
│ 手机: [________________]  *必填       │
│ 邮箱: [________________]              │
│ 等级: ○ VIP  ● 普通                  │
│ 来源: [▼ 飞书]                        │
│ 标签: [________________]              │
│ 备注: [________________]              │
│                                      │
│ [保存] [取消]                         │
└──────────────────────────────────────┘
```

---

### 第5章：数据模型

```typescript
interface Customer {
  id: string;
  name: string;
  phone: string;
  email?: string;
  level: "VIP" | "normal";
  status: "active" | "inactive" | "lost";
  source: "feishu" | "wechat" | "web";
  tags: string[];
  totalConversations: number;
  totalOrders: number;
  totalSpent: number;
  avgSatisfaction: number;
  registeredAt: Date;
  lastContactAt: Date;
  notes?: string;
}
```

---

### 第6章：业务规则

#### 6.1 客户等级规则

```yaml
VIP客户条件 (满足任一):
  - 总消费 > ¥10,000
  - 订单数 ≥ 5笔
  - 手动标记为VIP

自动升级:
  - 总消费达到¥10,000 → 自动升级为VIP
  - 发送通知给客服和客户

自动降级:
  - VIP客户180天未消费 → 降级为普通
```

#### 6.2 客户流失预警

```yaml
流失风险判定:
  - 90天未联系 → 低风险
  - 180天未联系 → 中风险
  - 365天未联系 → 高风险（已流失）

预警行动:
  - 中风险: 发送关怀消息
  - 高风险: 分配专人挽回
```

---

### 第7章：非功能需求

| 指标 | 目标值 |
|-----|--------|
| **客户列表加载** | <1秒 (100条) |
| **客户详情加载** | <800ms |
| **客户搜索** | <1秒 |
| **支持客户数** | 10万+ |

---

### 第8章：验收标准

- [ ] 客户列表正常展示，支持筛选排序
- [ ] 客户详情完整准确
- [ ] 客户标签管理正常
- [ ] 历史记录完整可查
- [ ] AI洞察准确有用
- [ ] 性能指标达标

---

**文档结束**

**相关文档**:
- 对话管理功能: `./2.1-Conversation-Management-PRD.md`
- 产品概述: `../1-overview/Product-Overview.md`
