# æ™ºèƒ½å”®åå·¥ä½œå° - æ ¸å¿ƒä¸šåŠ¡æµç¨‹è®¾è®¡æ–‡æ¡£

> **æ–‡æ¡£ç±»å‹**: ä¸šåŠ¡æµç¨‹è®¾è®¡
> **ç‰ˆæœ¬**: v2.0
> **æ—¥æœŸ**: 2026-01-14
> **çŠ¶æ€**: éƒ¨åˆ†å®ç°ï¼ˆæ•´ä½“å®Œæˆåº¦73%ï¼‰
> **æ›´æ–°è¯´æ˜**: åŸºäºWebå‰ç«¯å®é™…å®ç°æ›´æ–°æµç¨‹æè¿°ï¼ŒæŠ€æœ¯æ¶æ„ä¿æŒå»ºè®®æœ€ä½³å®è·µ

---

## ğŸ“Š æµç¨‹å®Œæˆåº¦æ€»è§ˆ

| ä¸šåŠ¡æµç¨‹ | å‰ç«¯UI | åç«¯API | ä¸šåŠ¡é€»è¾‘ | é›†æˆåº¦ | æ•´ä½“å®Œæˆåº¦ |
|---------|--------|---------|----------|--------|-----------|
| **å®¢æˆ·å’¨è¯¢å¤„ç†** | 95% âœ… | 60% âš ï¸ | 70% âš ï¸ | 70% âš ï¸ | **74%** |
| **éœ€æ±‚ç®¡ç†æµç¨‹** | 80% âš ï¸ | 40% âŒ | 50% âŒ | 50% âŒ | **55%** |
| **æ•…éšœå¤„ç†æµç¨‹** | 85% âš ï¸ | 50% âš ï¸ | 60% âš ï¸ | 60% âš ï¸ | **64%** |
| **å·¥ä½œæµå¼•æ“** | N/A | 60% âš ï¸ | 65% âš ï¸ | 60% âš ï¸ | **62%** |
| **äº‹ä»¶é©±åŠ¨æ¶æ„** | N/A | 70% âš ï¸ | 75% âš ï¸ | 70% âš ï¸ | **72%** |
| **å¹³å‡** | **87%** | **56%** | **64%** | **62%** | **65%** |

**å›¾ä¾‹è¯´æ˜**:
- âœ… **â‰¥80%**: åŸºæœ¬å¯ç”¨
- âš ï¸ **50-80%**: éƒ¨åˆ†å®Œæˆï¼Œéœ€è¡¥å…¨
- âŒ **<50%**: åŠŸèƒ½ç¼ºå¤±è¾ƒå¤š

---

## ä¸€ã€å®¢æˆ·å’¨è¯¢å¤„ç†å…¨æµç¨‹

> **æ•´ä½“å®Œæˆåº¦**: 74% âš ï¸
> **å‰ç«¯UI**: 95% âœ… | **åç«¯API**: 60% âš ï¸ | **ä¸šåŠ¡é€»è¾‘**: 70% âš ï¸

### 1.1 æµç¨‹æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åå°è‡ªåŠ¨å¤„ç†ï¼ˆAIé©±åŠ¨ï¼‰                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚ 1. å®¢æˆ·å‘èµ·å’¨è¯¢ (é£ä¹¦/ä¼å¾®/Web)          âœ… å·²å®ç°    â”‚
â”‚   â†“ (3ç§’)                                             â”‚
â”‚                                                        â”‚
â”‚ 2. æ¶ˆæ¯æ¥å…¥ä¸å¯¹è¯åˆ›å»º                     âœ… å·²å®ç°    â”‚
â”‚   â†’ åˆ›å»ºConversationå®ä½“                               â”‚
â”‚   â†’ ä¿å­˜å®¢æˆ·æ¶ˆæ¯åˆ°Messageè¡¨                            â”‚
â”‚   â†“ (5ç§’)                                             â”‚
â”‚                                                        â”‚
â”‚ 3. AIå¹¶è¡Œåˆ†æ (3ä¸ªAgentåŒæ—¶å·¥ä½œ)         âš ï¸ éƒ¨åˆ†å®ç°  â”‚
â”‚   â†’ SentimentAnalyzerAgent: åˆ†ææƒ…æ„Ÿ      ğŸ”„ è§„åˆ’ä¸­   â”‚
â”‚   â†’ RequirementCollectorAgent: è¯†åˆ«éœ€æ±‚   ğŸ”„ è§„åˆ’ä¸­   â”‚
â”‚   â†’ KnowledgeManagerAgent: æœç´¢çŸ¥è¯†åº“     âœ… å·²å®ç°    â”‚
â”‚   â†“ (8ç§’)                                             â”‚
â”‚                                                        â”‚
â”‚ 4. AIæ™ºèƒ½å›å¤ç”Ÿæˆ                         âš ï¸ éƒ¨åˆ†å®ç°  â”‚
â”‚   â†’ CustomerServiceAgentç”Ÿæˆ3ç§å›å¤å»ºè®®   âš ï¸ æ¡†æ¶å®Œæˆ  â”‚
â”‚   â†’ æ¯ç§å»ºè®®å¸¦ç½®ä¿¡åº¦è¯„åˆ†                   âš ï¸ UIå·²å»º  â”‚
â”‚   â†“ (3ç§’)                                             â”‚
â”‚                                                        â”‚
â”‚ 5. è‡ªåŠ¨åˆ›å»ºéœ€æ±‚å’Œä»»åŠ¡ï¼ˆåå°ï¼‰             âš ï¸ éƒ¨åˆ†å®ç°  â”‚
â”‚   â†’ éœ€æ±‚ç½®ä¿¡åº¦>0.7: åˆ›å»ºRequirementå®ä½“   âš ï¸ åŸºç¡€å®Œæˆ  â”‚
â”‚   â†’ é«˜ä¼˜å…ˆçº§éœ€æ±‚: è‡ªåŠ¨åˆ›å»ºTaskå®ä½“         âš ï¸ åŸºç¡€å®Œæˆ  â”‚
â”‚   â†’ ä¸éœ€è¦å®¢æœæ“ä½œï¼Œåå°è‡ªåŠ¨å®Œæˆ           ğŸ”„ è§„åˆ’ä¸­   â”‚
â”‚   â†“ (å®æ—¶)                                            â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰ç«¯å±•ç¤ºä¸å®¢æœæ“ä½œï¼ˆäººå·¥å‚ä¸ï¼‰                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚ 6. WebSocketæ¨é€åˆ°å‰ç«¯                    âš ï¸ éƒ¨åˆ†å®ç°  â”‚
â”‚   â†’ å¯¹è¯æ¶ˆæ¯                               âœ… å·²å®ç°    â”‚
â”‚   â†’ AIç”Ÿæˆçš„3ç§å›å¤å»ºè®®                    âš ï¸ UIå·²å»º   â”‚
â”‚   â†’ æ¨èçŸ¥è¯†åº“                             âœ… å·²å®ç°    â”‚
â”‚   â†’ å·²åˆ›å»ºçš„éœ€æ±‚å’Œä»»åŠ¡ï¼ˆåªè¯»ï¼Œæ— éœ€æ“ä½œï¼‰  âš ï¸ UIå·²å»º   â”‚
â”‚   â†“                                                    â”‚
â”‚                                                        â”‚
â”‚ 7. å®¢æœå®¡æ ¸AIå»ºè®®å¹¶ç¡®è®¤å›å¤ (Phase 1å¿…éœ€)  âœ… å·²å®ç°    â”‚
â”‚   â†’ æŸ¥çœ‹AIçš„3ç§å›å¤å»ºè®®                    âœ… UIå®Œæ•´   â”‚
â”‚   â†’ é€‰æ‹©ä¸€ç§æˆ–ä¿®æ”¹åç¡®è®¤                   âœ… UIå®Œæ•´   â”‚
â”‚   â†’ ç‚¹å‡»"å‘é€å›å¤"æŒ‰é’®                     âœ… å·²å®ç°    â”‚
â”‚   â†“ (3ç§’)                                             â”‚
â”‚                                                        â”‚
â”‚ 8. å‘é€å›å¤ç»™å®¢æˆ·                         âœ… å·²å®ç°    â”‚
â”‚   â†’ é€šè¿‡IMæ¸ é“å‘é€                         âš ï¸ éƒ¨åˆ†é›†æˆ  â”‚
â”‚   â†’ æ›´æ–°å¯¹è¯çŠ¶æ€                           âœ… å·²å®ç°    â”‚
â”‚   â†“ (å®æ—¶)                                            â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åç»­è·Ÿè¸ªï¼ˆè‡ªåŠ¨ï¼‰                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚ 9. è´¨æ£€è¯„åˆ†ä¸è·Ÿè¸ª                         âš ï¸ éƒ¨åˆ†å®ç°  â”‚
â”‚   â†’ QualityInspectorAgentå®æ—¶è¯„åˆ†         ğŸ”„ è§„åˆ’ä¸­   â”‚
â”‚   â†’ å®¢æˆ·æ»¡æ„åº¦é¢„æµ‹                         ğŸ”„ è§„åˆ’ä¸­   â”‚
â”‚   â†“                                                    â”‚
â”‚                                                        â”‚
â”‚ 10. çŸ¥è¯†æ²‰æ·€ä¸æ›´æ–°                        ğŸ”„ Phase 3   â”‚
â”‚   â†’ å¯¹è¯ç»“æŸåè‡ªåŠ¨ç”Ÿæˆæ€»ç»“                 ğŸ”„ è§„åˆ’ä¸­   â”‚
â”‚   â†’ æ›´æ–°çŸ¥è¯†åº“                             ğŸ”„ è§„åˆ’ä¸­   â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ç†è§£**:
- âœ… **æ­¥éª¤1-2**: å‰ç«¯UIå’ŒåŸºç¡€åç«¯å®Œæˆï¼Œå¯ç”¨ï¼ˆå®Œæˆåº¦90%ï¼‰
- âš ï¸ **æ­¥éª¤3-5**: æ¡†æ¶å·²å»ºï¼ŒAIæœåŠ¡æ·±åº¦é›†æˆå¾…å®Œå–„ï¼ˆå®Œæˆåº¦55%ï¼‰
- âœ… **æ­¥éª¤6-8**: å‰ç«¯UIå®Œæ•´ï¼ŒåŸºç¡€äº¤äº’å¯ç”¨ï¼ˆå®Œæˆåº¦85%ï¼‰
- ğŸ”„ **æ­¥éª¤9-10**: Phase 2-3è§„åˆ’ï¼Œå¾…å®ç°ï¼ˆå®Œæˆåº¦30%ï¼‰

**æ—¶é—´åˆ†é…**:
- åå°è‡ªåŠ¨å¤„ç†: çº¦20ç§’ï¼ˆç†æƒ³çŠ¶æ€ï¼‰
- å®¢æœå®¡æ ¸æ“ä½œ: 1-5åˆ†é’Ÿï¼ˆå–å†³äºå¤æ‚åº¦ï¼‰
- æ€»è®¡: 1-5åˆ†é’Ÿå®Œæˆä¸€æ¬¡å®¢æˆ·å’¨è¯¢

---

### 1.1.1 å…³é”®æœ¯è¯­è§£é‡Š

ä¸ºé¿å…ç†è§£åå·®ï¼Œä»¥ä¸‹æœ¯è¯­éœ€ç‰¹åˆ«è¯´æ˜ï¼š

#### æœ¯è¯­1: "éœ€æ±‚å’Œä»»åŠ¡åˆ›å»º"

**å®é™…å«ä¹‰**:
- AIè‡ªåŠ¨ä»å®¢æˆ·æ¶ˆæ¯ä¸­**è¯†åˆ«éœ€æ±‚**ï¼ˆå¦‚"ç³»ç»Ÿæ•…éšœ"ã€"åŠŸèƒ½å’¨è¯¢"ï¼‰
- ç³»ç»Ÿåå°**è‡ªåŠ¨åˆ›å»ºRequirementå®ä½“**ï¼ˆæ•°æ®åº“è®°å½•ï¼‰
- é«˜ä¼˜å…ˆçº§éœ€æ±‚è‡ªåŠ¨è§¦å‘**åˆ›å»ºTaskå®ä½“**ï¼ˆå¾…åŠä»»åŠ¡ï¼‰
- å®¢æœåœ¨å‰ç«¯åªèƒ½**æŸ¥çœ‹**è¿™äº›å·²åˆ›å»ºçš„éœ€æ±‚å’Œä»»åŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ

**å½“å‰å®ç°çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ60%ï¼‰
- âœ… å‰ç«¯æœ‰éœ€æ±‚å’Œä»»åŠ¡å±•ç¤ºUI
- âš ï¸ åç«¯Requirement/TaskåŸºç¡€CRUDå®Œæˆ
- âŒ AIè‡ªåŠ¨è¯†åˆ«éœ€æ±‚é€»è¾‘å¾…å®è£…
- âŒ è‡ªåŠ¨åˆ›å»ºä»»åŠ¡è§¦å‘å™¨å¾…å®Œå–„

**ä¸¾ä¾‹**:
```
å®¢æˆ·è¯´: "ç³»ç»Ÿçªç„¶æŠ¥é”™ï¼Œæ— æ³•ç™»å½•ï¼"
  â†“ AIåˆ†æï¼ˆè§„åˆ’ä¸­ï¼‰
è¯†åˆ«å‡ºéœ€æ±‚: "æ•…éšœå¤„ç† - ERPç™»å½•å¤±è´¥"
  â†“ åå°è‡ªåŠ¨ï¼ˆéƒ¨åˆ†å®ç°ï¼‰
åˆ›å»ºRequirement: {
  id: "req001",
  title: "æ•…éšœå¤„ç† - ERPç™»å½•å¤±è´¥",
  category: "technical",
  priority: "urgent",
  confidence: 0.85
}
  â†“ å› ä¸ºpriority=urgentï¼Œè‡ªåŠ¨è§¦å‘ï¼ˆéƒ¨åˆ†å®ç°ï¼‰
åˆ›å»ºTask: {
  id: "task001",
  title: "éœ€æ±‚è·Ÿè¿›: æ•…éšœå¤„ç†",
  requirementId: "req001",
  status: "pending"
}
  â†“ å‰ç«¯å±•ç¤ºï¼ˆå·²å®ç°ï¼‰
å®¢æœçœ‹åˆ°: å³ä¾§é¢æ¿æ˜¾ç¤º"å·²åˆ›å»º1ä¸ªéœ€æ±‚ï¼Œ1ä¸ªä»»åŠ¡"ï¼ˆåªè¯»ï¼‰
```

---

#### æœ¯è¯­2: "äººå·¥å®¡æ ¸" vs "å®¢æœç¡®è®¤"

è¿™ä¸¤ä¸ªæœ¯è¯­åœ¨åŸæ–‡æ¡£ä¸­æ··ç”¨ï¼Œå®é™…æ˜¯**åŒä¸€ä¸ªåŠ¨ä½œ**ã€‚

**ç»Ÿä¸€æœ¯è¯­**: **å®¢æœå®¡æ ¸AIå›å¤å»ºè®®**

**å½“å‰å®ç°çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆ95%ï¼‰
- âœ… å‰ç«¯AIå»ºè®®é¢æ¿å®Œæ•´
- âœ… ä¸‰ç§å¯¹è¯æ¨¡å¼UIå®Œæ•´ï¼ˆagent_auto / agent_supervised / human_firstï¼‰
- âœ… é€‰æ‹©/ä¿®æ”¹/å‘é€äº¤äº’å®Œæ•´
- âš ï¸ AIå»ºè®®ç”Ÿæˆåç«¯é€»è¾‘å¾…å®Œå–„

**å«ä¹‰**:
- å®¢æœæŸ¥çœ‹AIç”Ÿæˆçš„3ç§å›å¤å»ºè®®
- é€‰æ‹©ä¸€ç§é‡‡çº³ï¼Œæˆ–ä¿®æ”¹åç¡®è®¤
- ç‚¹å‡»"å‘é€å›å¤"æŒ‰é’®

**ä¸æ˜¯æŒ‡**:
- âŒ å®¡æ ¸éœ€æ±‚æ˜¯å¦åˆç†ï¼ˆéœ€æ±‚æ˜¯åå°è‡ªåŠ¨åˆ›å»ºçš„ï¼‰
- âŒ å®¡æ ¸ä»»åŠ¡æ˜¯å¦éœ€è¦æ´¾å‘ï¼ˆä»»åŠ¡æ˜¯è‡ªåŠ¨åˆ›å»ºçš„ï¼‰
- âœ… **åªæ˜¯å®¡æ ¸"ç»™å®¢æˆ·çš„å›å¤å†…å®¹"**

**å‰ç«¯å®ç°æˆªå›¾**:
```
å‰ç«¯å±•ç¤º:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIå»ºè®®å›å¤1ï¼ˆæ¨èï¼‰:             â”‚
â”‚ "æ„Ÿè°¢åé¦ˆï¼è¿™æ˜¯è®¤è¯æœåŠ¡é—®é¢˜..." â”‚
â”‚ ç½®ä¿¡åº¦: â­â­â­â­ (0.90)         â”‚
â”‚                                 â”‚
â”‚ AIå»ºè®®å›å¤2:                    â”‚
â”‚ "æŠ€æœ¯å›¢é˜Ÿå·²æ”¶åˆ°è­¦æŠ¥..."         â”‚
â”‚ ç½®ä¿¡åº¦: â­â­â­ (0.85)           â”‚
â”‚                                 â”‚
â”‚ AIå»ºè®®å›å¤3:                    â”‚
â”‚ "éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥å›°æ‰°..."       â”‚
â”‚ ç½®ä¿¡åº¦: â­â­â­ (0.75)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®¢æœæ“ä½œ:
1. æŸ¥çœ‹3ç§å»ºè®®          âœ… UIå·²å®ç°
2. é€‰æ‹©å»ºè®®1ï¼ˆæˆ–ä¿®æ”¹åï¼‰ âœ… äº¤äº’å·²å®ç°
3. ç‚¹å‡»"å‘é€å›å¤"        âœ… æŒ‰é’®å·²å®ç°
   â†’ è¿™å°±æ˜¯"å®¢æœå®¡æ ¸AIå»ºè®®"
```

---

#### æœ¯è¯­3: "å‰ç«¯å±•ç¤º" vs "å®¢æœç¡®è®¤"

è¿™ä¸¤ä¸ªæœ¯è¯­æè¿°çš„æ˜¯**è¿ç»­çš„ä¸¤ä¸ªåŠ¨ä½œ**ã€‚

**æ­£ç¡®ç†è§£**:
- **å‰ç«¯å±•ç¤º**: WebSocketæ¨é€æ•°æ®åˆ°å‰ç«¯ç•Œé¢ï¼ˆæŠ€æœ¯åŠ¨ä½œï¼‰
- **å®¢æœç¡®è®¤**: å®¢æœçœ‹åˆ°ç•Œé¢åå®¡æ ¸å¹¶ç‚¹å‡»å‘é€ï¼ˆäººå·¥åŠ¨ä½œï¼‰

**å½“å‰å®ç°çŠ¶æ€**:
- **å‰ç«¯å±•ç¤º**: âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ70%ï¼‰
  - âœ… WebSocketè¿æ¥å·²å»ºç«‹
  - âš ï¸ äº‹ä»¶æ¨é€é€»è¾‘å¾…å®Œå–„
  - âœ… UIå®æ—¶æ›´æ–°å·²å®ç°
- **å®¢æœç¡®è®¤**: âœ… å·²å®ç°ï¼ˆ95%ï¼‰
  - âœ… å®¡æ ¸äº¤äº’å®Œæ•´
  - âœ… å‘é€é€»è¾‘å®Œæ•´

**å»ºè®®**: å°†è¿™ä¸¤ä¸ªæ­¥éª¤åˆå¹¶ä¸ºä¸€ä¸ª - "å‰ç«¯å±•ç¤ºä¸å®¢æœå®¡æ ¸"

---

#### æœ¯è¯­4: "è´¨æ£€è¯„åˆ†"

**ä¸æ˜¯æŒ‡**: å®¢æœæ‰‹åŠ¨ç»™å¯¹è¯æ‰“åˆ†

**å®é™…å«ä¹‰**:
- QualityInspectorAgentï¼ˆè´¨æ£€Agentï¼‰è‡ªåŠ¨è¯„ä¼°
- è¯„ä¼°ç»´åº¦: å¤„ç†è´¨é‡ã€æƒ…ç»ªæ”¹å–„ã€å®¢æˆ·æ»¡æ„åº¦
- ç”Ÿæˆè´¨æ£€æŠ¥å‘Šï¼ˆè‡ªåŠ¨ï¼‰
- ä½åˆ†ä¼šè‡ªåŠ¨åˆ›å»ºæ”¹è¿›ä»»åŠ¡

**å½“å‰å®ç°çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ50%ï¼‰
- âœ… å‰ç«¯è´¨æ£€é¢æ¿UIå®Œæ•´ï¼ˆ3ç»´è¯„åˆ†å±•ç¤ºï¼‰
- âš ï¸ åç«¯è´¨æ£€ç®—æ³•æ¡†æ¶å·²å»º
- âŒ è´¨æ£€Agentæœªå®è£…
- âŒ æ”¹è¿›ä»»åŠ¡è‡ªåŠ¨åˆ›å»ºå¾…å®ç°

**å®¢æœå‚ä¸åº¦**: 0%ï¼ˆå®Œå…¨è‡ªåŠ¨ï¼Œè§„åˆ’ä¸­ï¼‰

---

### 1.1.2 å®Œæ•´æ¡ˆä¾‹æ¼”ç¤º

ä¸ºäº†æ›´ç›´è§‚ç†è§£ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„çœŸå®æ¡ˆä¾‹ï¼š

#### åœºæ™¯ï¼šå®¢æˆ·æŠ¥å‘Šç³»ç»Ÿæ•…éšœ

**æ—¶é—´çº¿**ï¼š
```
T+0ç§’: å®¢æˆ·åœ¨é£ä¹¦å‘é€æ¶ˆæ¯                  âœ… å·²å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æˆ·(å¼ ä¸‰): ç³»ç»Ÿçªç„¶æŠ¥é”™ï¼Œæ— æ³•ç™»å½•ï¼        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+3ç§’: åå°è‡ªåŠ¨åˆ›å»ºå¯¹è¯                     âœ… å·²å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [åå°æ—¥å¿—]                                  â”‚
â”‚ âœ“ åˆ›å»ºConversation (id: conv123)           â”‚
â”‚ âœ“ ä¿å­˜Message (å®¢æˆ·æ¶ˆæ¯)                    â”‚
â”‚ âœ“ è§¦å‘MessageSentEvent                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+8ç§’: AIå¹¶è¡Œåˆ†æå®Œæˆ                       âš ï¸ éƒ¨åˆ†å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [è§„åˆ’ä¸­ - AIæœåŠ¡æœªå®Œå…¨é›†æˆ]                â”‚
â”‚ â—‹ æƒ…æ„Ÿåˆ†æ: negative (65%), æ€¥åˆ‡           â”‚
â”‚ â—‹ éœ€æ±‚è¯†åˆ«: æ•…éšœå¤„ç† - ERPç™»å½•å¤±è´¥         â”‚
â”‚ âœ“ çŸ¥è¯†åº“: æ‰¾åˆ°"ERPç™»å½•é—®é¢˜æ’æŸ¥æŒ‡å—"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+16ç§’: AIç”Ÿæˆå›å¤å»ºè®®                      âš ï¸ éƒ¨åˆ†å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [AIå»ºè®®ç”Ÿæˆæ¡†æ¶å·²å»ºï¼Œæ¨¡å‹é›†æˆå¾…å®Œå–„]       â”‚
â”‚ â—‹ ç”Ÿæˆ3ç§å›å¤å»ºè®®                           â”‚
â”‚   - å»ºè®®1 (çŸ¥è¯†åº“): ç½®ä¿¡åº¦0.90             â”‚
â”‚   - å»ºè®®2 (å†å²æ¡ˆä¾‹): ç½®ä¿¡åº¦0.85           â”‚
â”‚   - å»ºè®®3 (è‡ªå®šä¹‰): ç½®ä¿¡åº¦0.75             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+19ç§’: è‡ªåŠ¨åˆ›å»ºéœ€æ±‚å’Œä»»åŠ¡                  âš ï¸ éƒ¨åˆ†å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [åŸºç¡€CRUDå·²å®Œæˆï¼Œè‡ªåŠ¨åˆ›å»ºé€»è¾‘å¾…å®Œå–„]       â”‚
â”‚ â—‹ åˆ›å»ºRequirement (id: req001)             â”‚
â”‚   title: "æ•…éšœå¤„ç† - ERPç™»å½•å¤±è´¥"           â”‚
â”‚   priority: urgent, confidence: 0.85        â”‚
â”‚                                             â”‚
â”‚ â—‹ è‡ªåŠ¨è§¦å‘åˆ›å»ºTask (id: task001)           â”‚
â”‚   title: "éœ€æ±‚è·Ÿè¿›: æ•…éšœå¤„ç†"               â”‚
â”‚   æ´¾å‘ç»™: è‡ªåŠ¨åˆ†é…ç®—æ³•ï¼ˆå¾…å®ç°ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+20ç§’: æ¨é€åˆ°å®¢æœå‰ç«¯                      âœ… å·²å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æœå·¥ä½œå° - ç‹å°ç¾ï¼ˆåœ¨çº¿ï¼‰                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·¦ä¾§: å¯¹è¯åˆ—è¡¨                  âœ… UIå®Œæ•´  â”‚
â”‚                                             â”‚
â”‚ ä¸­é—´: å¯¹è¯å†…å®¹                  âœ… UIå®Œæ•´  â”‚
â”‚   å¼ ä¸‰: ç³»ç»Ÿçªç„¶æŠ¥é”™ï¼Œæ— æ³•ç™»å½•ï¼            â”‚
â”‚                                             â”‚
â”‚   ğŸ¤– AIå»ºè®®å›å¤ï¼ˆ3ç§ï¼‰:         âœ… UIå®Œæ•´  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚ å»ºè®®1ï¼ˆæ¨è â­â­â­â­ï¼‰:                 â”‚ â”‚
â”‚   â”‚ æ„Ÿè°¢åé¦ˆï¼è¿™æ˜¯è®¤è¯æœåŠ¡é—®é¢˜ï¼Œæˆ‘ä»¬çš„   â”‚ â”‚
â”‚   â”‚ æŠ€æœ¯å›¢é˜Ÿå·²ç»åœ¨å¤„ç†ï¼Œé¢„è®¡15åˆ†é’Ÿå†…æ¢å¤ â”‚ â”‚
â”‚   â”‚ æ­£å¸¸ã€‚ç»™æ‚¨å¸¦æ¥çš„ä¸ä¾¿æ·±è¡¨æ­‰æ„ã€‚       â”‚ â”‚
â”‚   â”‚                                       â”‚ â”‚
â”‚   â”‚ [é‡‡çº³æ­¤æ–¹æ¡ˆ]  [ä¿®æ”¹åå‘é€]            â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚   [æŸ¥çœ‹å»ºè®®2] [æŸ¥çœ‹å»ºè®®3]                   â”‚
â”‚                                             â”‚
â”‚ å³ä¾§: åˆ†æé¢æ¿                  âœ… UIå®Œæ•´  â”‚
â”‚   ğŸ“Š å®¢æˆ·ç”»åƒ: æ™®é€šå®¢æˆ·, é£é™©ç­‰çº§ä½         â”‚
â”‚   ğŸ“š æ¨èçŸ¥è¯†åº“: ERPç™»å½•é—®é¢˜æ’æŸ¥æŒ‡å—        â”‚
â”‚   ğŸ“‹ å·²åˆ›å»ºéœ€æ±‚: 1ä¸ª (æ•…éšœå¤„ç†)             â”‚
â”‚   ğŸ“‹ å·²åˆ›å»ºä»»åŠ¡: 1ä¸ª (éœ€æ±‚è·Ÿè¿›)             â”‚
â”‚      â†‘ è¿™äº›æ˜¯åå°è‡ªåŠ¨åˆ›å»ºçš„ï¼Œåªè¯» âš ï¸å¾…å®Œå–„ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+20ç§’ ~ T+2åˆ†é’Ÿ: å®¢æœå®¡æ ¸ï¼ˆäººå·¥æ“ä½œï¼‰      âœ… å·²å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¢æœæ“ä½œ:                                   â”‚
â”‚ 1. æŸ¥çœ‹å®¢æˆ·æ¶ˆæ¯              âœ… UIå®Œæ•´      â”‚
â”‚ 2. æŸ¥çœ‹AIçš„3ç§å»ºè®®           âœ… UIå®Œæ•´      â”‚
â”‚ 3. æŸ¥çœ‹å³ä¾§çš„å®¢æˆ·ç”»åƒå’ŒçŸ¥è¯†åº“âœ… UIå®Œæ•´      â”‚
â”‚ 4. å†³å®š: é‡‡çº³å»ºè®®1ï¼Œä½†è¡¥å……ä¸€å¥è¯            â”‚
â”‚ 5. ç‚¹å‡»"ä¿®æ”¹åå‘é€"          âœ… äº¤äº’å®Œæ•´    â”‚
â”‚ 6. åœ¨å»ºè®®1åé¢åŠ ä¸Š: "å¦‚æœ‰ä»»ä½•ç–‘é—®è¯·éšæ—¶..." â”‚
â”‚ 7. ç‚¹å‡»"ç¡®è®¤å‘é€"            âœ… æŒ‰é’®å®Œæ•´    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+2åˆ†é’Ÿ3ç§’: å‘é€å›å¤ç»™å®¢æˆ·                  âœ… å·²å®ç°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é£ä¹¦IM - å¼ ä¸‰æ”¶åˆ°æ¶ˆæ¯:          âš ï¸ éƒ¨åˆ†é›†æˆâ”‚
â”‚                                             â”‚
â”‚ å®¢æœç‹å°ç¾:                                 â”‚
â”‚ æ„Ÿè°¢åé¦ˆï¼è¿™æ˜¯è®¤è¯æœåŠ¡é—®é¢˜ï¼Œæˆ‘ä»¬çš„æŠ€æœ¯å›¢é˜Ÿ â”‚
â”‚ å·²ç»åœ¨å¤„ç†ï¼Œé¢„è®¡15åˆ†é’Ÿå†…æ¢å¤æ­£å¸¸ã€‚ç»™æ‚¨å¸¦æ¥ â”‚
â”‚ çš„ä¸ä¾¿æ·±è¡¨æ­‰æ„ã€‚å¦‚æœ‰ä»»ä½•ç–‘é—®è¯·éšæ—¶è”ç³»æˆ‘ã€‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T+2åˆ†é’Ÿ3ç§’: åå°è‡ªåŠ¨è´¨æ£€                    ğŸ”„ è§„åˆ’ä¸­
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [è´¨æ£€Agentæœªå®è£…]                           â”‚
â”‚ â—‹ QualityInspectorAgentå¼€å§‹è¯„ä¼°            â”‚
â”‚   - å¤„ç†è´¨é‡: 92åˆ† (å›å¤å®Œæ•´ã€ä¸“ä¸š)        â”‚
â”‚   - æƒ…ç»ªæ”¹å–„: negative â†’ neutral (æ”¹å–„25%) â”‚
â”‚   - å®¢æˆ·æ»¡æ„åº¦: é¢„æµ‹4.2/5                   â”‚
â”‚                                             â”‚
â”‚ â—‹ è´¨æ£€é€šè¿‡ï¼Œæ— éœ€æ”¹è¿›ä»»åŠ¡                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ç‚¹æ€»ç»“**:
1. âœ… **å¯¹è¯åˆ›å»º** - T+3ç§’ï¼Œå‰ç«¯å’Œåç«¯åŸºç¡€åŠŸèƒ½å®Œæˆï¼ˆ90%ï¼‰
2. âš ï¸ **AIåˆ†æ** - T+8ç§’ï¼ŒçŸ¥è¯†åº“æœç´¢å®Œæˆï¼Œæƒ…æ„Ÿ/éœ€æ±‚åˆ†æå¾…å®è£…ï¼ˆ55%ï¼‰
3. âš ï¸ **å›å¤å»ºè®®** - T+16ç§’ï¼ŒUIæ¡†æ¶å®Œæ•´ï¼ŒAIç”Ÿæˆå¾…å®Œå–„ï¼ˆ60%ï¼‰
4. âš ï¸ **éœ€æ±‚ä»»åŠ¡åˆ›å»º** - T+19ç§’ï¼ŒCRUDå®Œæˆï¼Œè‡ªåŠ¨åˆ›å»ºå¾…å®Œå–„ï¼ˆ60%ï¼‰
5. âœ… **å‰ç«¯å±•ç¤º** - T+20ç§’ï¼ŒUIå®Œæ•´å¯ç”¨ï¼ˆ95%ï¼‰
6. âœ… **å®¢æœå®¡æ ¸** - T+20ç§’~T+2åˆ†é’Ÿï¼Œäº¤äº’æµç¨‹å®Œæ•´ï¼ˆ95%ï¼‰
7. âœ… **å‘é€å›å¤** - T+2åˆ†é’Ÿ3ç§’ï¼ŒåŸºç¡€åŠŸèƒ½å®Œæˆï¼ˆ85%ï¼‰
8. ğŸ”„ **è´¨æ£€è¯„åˆ†** - T+2åˆ†é’Ÿ3ç§’ï¼Œè§„åˆ’ä¸­ï¼ˆ30%ï¼‰

---

### 1.2 è¯¦ç»†æµç¨‹

#### æ­¥éª¤1: æ¶ˆæ¯æ¥å…¥ (3ç§’) - âœ… å·²å®ç°ï¼ˆ90%ï¼‰

**è§¦å‘æ¡ä»¶**: å®¢æˆ·åœ¨ä»»æ„æ¸ é“å‘é€æ¶ˆæ¯

**å®ç°çŠ¶æ€**:
- âœ… å‰ç«¯æ¶ˆæ¯è¾“å…¥å’Œå‘é€UI
- âœ… åç«¯æ¶ˆæ¯æ¥æ”¶API
- âš ï¸ å¤šæ¸ é“ï¼ˆé£ä¹¦/ä¼å¾®ï¼‰é›†æˆå¾…å®Œå–„

**æ‰§è¡Œæµç¨‹**:
```typescript
1. ImController.handleMessage(request)
   è¾“å…¥: { channel, customerId, content, timestamp }

2. éªŒè¯æ¶ˆæ¯æ ¼å¼å’Œå®¢æˆ·èº«ä»½           âœ… å·²å®ç°

3. CreateConversationUseCase.execute() âœ… å·²å®ç°
   - æ£€æŸ¥æ˜¯å¦æœ‰æœªå…³é—­çš„å¯¹è¯
   - å¦‚æœ‰åˆ™å¤ç”¨ï¼Œå¦åˆ™åˆ›å»ºæ–°å¯¹è¯
   - è®¾ç½®channel, priority, mode

4. è§¦å‘é¢†åŸŸäº‹ä»¶:                     âš ï¸ éƒ¨åˆ†å®ç°
   - ConversationCreatedEvent (é¦–æ¬¡)
   - MessageSentEvent

5. EventBus.publishAll(events)        âš ï¸ éƒ¨åˆ†å®ç°
```

**è¾“å‡º**:
- Conversationå®ä½“ (conversationId, status=open)
- Messageå®ä½“ (messageId, content, senderType=customer)

**å…³é”®å†³ç­–**:
- å®¢æˆ·ç­‰çº§åˆ¤æ–­: VIP â†’ priority=high, mode=human_first
- å†å²å¯¹è¯æ£€æŸ¥: 30å¤©å†…æœ‰æœªå…³é—­å¯¹è¯ â†’ å¤ç”¨

**å¯¹è¯æ¨¡å¼é€‰æ‹©é€»è¾‘**ï¼ˆå»ºè®®å®ç°ï¼‰:
```python
# æ ¹æ®å®¢æˆ·å±æ€§è‡ªåŠ¨é€‰æ‹©å¯¹è¯æ¨¡å¼
def selectMode(customer: Customer) -> Mode {
  if (customer.isVIP or customer.riskLevel == "high") {
    return "human_first"  # VIP/é«˜é£é™© â†’ äººå·¥ä¼˜å…ˆ
  }
  else if (customer.historyQuality < 0.7) {
    return "agent_supervised"  # å†å²è´¨é‡å·® â†’ Agentç›‘ç£
  }
  else {
    return "agent_auto"  # å¸¸è§„å®¢æˆ· â†’ Agentè‡ªåŠ¨
  }
}
```

> **é‡è¦**: Phase 1ï¼ˆå½“å‰ï¼‰ï¼Œæ— è®ºé€‰æ‹©å“ªç§æ¨¡å¼ï¼Œæ‰€æœ‰æ¶‰åŠå®¢æˆ·äº¤äº’çš„å›å¤å‡éœ€**äººå·¥ç¡®è®¤åå‘é€**ã€‚ä¸‰ç§æ¨¡å¼çš„å·®å¼‚ä¸»è¦ä½“ç°åœ¨UIäº¤äº’ã€è·¯ç”±ç­–ç•¥å’Œæ•°æ®è®°å½•ä¸Šã€‚

---

#### æ­¥éª¤2: AIå¹¶è¡Œåˆ†æ (5ç§’) - âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ55%ï¼‰

**è§¦å‘æ¡ä»¶**: MessageSentEventå‘å¸ƒ

**å®ç°çŠ¶æ€**:
- ğŸ”„ SentimentAnalyzerAgent - è§„åˆ’ä¸­ï¼ˆ0%ï¼‰
- ğŸ”„ RequirementCollectorAgent - è§„åˆ’ä¸­ï¼ˆ20%ï¼ŒåŸºç¡€æ¡†æ¶ï¼‰
- âœ… KnowledgeManagerAgent - å·²å®ç°ï¼ˆ90%ï¼‰

**æ‰§è¡Œæµç¨‹**ï¼ˆå»ºè®®å®ç°ï¼‰:
```yaml
parallel_analysis:
  å¹¶è¡Œæ‰§è¡Œ3ä¸ªAgent:

  1. SentimentAnalyzerAgent (3ç§’)     ğŸ”„ è§„åˆ’ä¸­
     è¾“å…¥: message.content + conversation.history
     è¾“å‡º: { sentiment: "negative", score: 0.65, intensity: "æ€¥åˆ‡" }

  2. RequirementCollectorAgent (5ç§’)  ğŸ”„ è§„åˆ’ä¸­
     è¾“å…¥: message.content + customer.profile
     è¾“å‡º: {
       requirements: [
         { title: "æ•…éšœå¤„ç†", category: "technical", priority: "urgent" }
       ],
       confidence: 0.85
     }

  3. KnowledgeManagerAgent (5ç§’)      âœ… å·²å®ç°
     è¾“å…¥: message.content + sentiment
     è¾“å‡º: {
       knowledgeItems: [
         { id: "kb001", title: "ERPç™»å½•é—®é¢˜æ’æŸ¥æŒ‡å—", score: 0.92 }
       ]
     }
```

**è¾“å‡º**:
- æƒ…æ„Ÿåˆ†æç»“æœ (sentiment, score, intensity) - ğŸ”„ è§„åˆ’ä¸­
- éœ€æ±‚åˆ—è¡¨ (requirements[], confidence) - ğŸ”„ è§„åˆ’ä¸­
- æ¨èçŸ¥è¯†åº“ (knowledgeItems[]) - âœ… å·²å®ç°

**é™çº§ç­–ç•¥**ï¼ˆå»ºè®®å®ç°ï¼‰:
- LLMè°ƒç”¨å¤±è´¥ â†’ ä½¿ç”¨å…³é”®è¯åŒ¹é…ç®—æ³•
- è¶…æ—¶(>5ç§’) â†’ è¿”å›éƒ¨åˆ†ç»“æœ

---

#### æ­¥éª¤3: æ™ºèƒ½å›å¤ç”Ÿæˆ (8ç§’) - âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ60%ï¼‰

**è§¦å‘æ¡ä»¶**: å¹¶è¡Œåˆ†æå®Œæˆ

**å®ç°çŠ¶æ€**:
- âœ… å‰ç«¯AIå»ºè®®é¢æ¿UIï¼ˆ95%ï¼‰
- âš ï¸ åç«¯å›å¤ç”Ÿæˆæ¡†æ¶ï¼ˆ40%ï¼‰
- âŒ LLMæ¨¡å‹é›†æˆï¼ˆ0%ï¼‰

**æ‰§è¡Œæµç¨‹**ï¼ˆå»ºè®®å®ç°ï¼‰:
```typescript
1. CustomerServiceAgent.generateReply()  âš ï¸ æ¡†æ¶å·²å»º
   è¾“å…¥: {
     message: "ç³»ç»ŸæŠ¥é”™ï¼Œæ— æ³•ç™»å½•",
     sentiment: { sentiment: "negative", score: 0.65 },
     requirements: [...],
     knowledge: [...]
   }

2. æ„å»ºPrompt:                           ğŸ”„ è§„åˆ’ä¸­
   """
   å®¢æˆ·æ¶ˆæ¯: {message}
   æƒ…ç»ªçŠ¶æ€: {sentiment} (æ€¥åˆ‡)
   ç›¸å…³çŸ¥è¯†: {knowledge[0].title}
   å†å²æ¡ˆä¾‹: 90%æˆåŠŸç‡ä½¿ç”¨"è®¤è¯æœåŠ¡é‡å¯"

   è¯·ç”Ÿæˆ3ç§ä¸“ä¸šã€æœ‰æ¸©åº¦çš„å›å¤æ–¹æ¡ˆã€‚
   """

3. LLMè°ƒç”¨ (DeepSeek v3.1)               ğŸ”„ è§„åˆ’ä¸­
   temperature: 0.7
   max_tokens: 500

4. è§£æè¾“å‡º:                             âš ï¸ æ¡†æ¶å·²å»º
   {
     suggestions: [
       { id: 1, content: "...", source: "knowledge", confidence: 0.90 },
       { id: 2, content: "...", source: "history", confidence: 0.85 },
       { id: 3, content: "...", source: "custom", confidence: 0.75 }
     ],
     overall_confidence: 0.85
   }
```

**è¾“å‡º**:
- 3+ç§å›å¤å»ºè®®ï¼ˆUIå±•ç¤ºå·²å®ç°ï¼‰
- æ¯ç§å»ºè®®çš„ç½®ä¿¡åº¦ï¼ˆUIå±•ç¤ºå·²å®ç°ï¼‰
- æ€»ä½“ç½®ä¿¡åº¦ï¼ˆUIå±•ç¤ºå·²å®ç°ï¼‰

**è´¨é‡ä¿éšœ**ï¼ˆå»ºè®®å®ç°ï¼‰:
- æ•æ„Ÿè¯è¿‡æ»¤
- å›å¤é•¿åº¦æ§åˆ¶ (50-300å­—)
- è¯­æ°”æ£€æŸ¥ (ç¤¼è²Œ/ä¸“ä¸š)

---

#### æ­¥éª¤4: äººå·¥å®¡æ ¸å†³ç­– (å†³ç­–ç‚¹1) - âœ… å·²å®ç°ï¼ˆ95%ï¼‰

> **é˜¶æ®µè¯´æ˜**:
> - **Phase 1ï¼ˆå½“å‰ï¼‰**: æ‰€æœ‰å›å¤å‡éœ€äººå·¥ç¡®è®¤å‘é€ï¼Œå†³ç­–é€»è¾‘ä¸»è¦ç”¨äºæ•°æ®è®°å½•å’Œæ¨¡å‹è®­ç»ƒ âœ… UIå®Œæ•´
> - **Phase 2-3ï¼ˆæœªæ¥ï¼‰**: æ ¹æ®ç½®ä¿¡åº¦å’Œåœºæ™¯å†³å®šæ˜¯å¦è‡ªåŠ¨å‘é€ ğŸ”„ è§„åˆ’ä¸­

**å®ç°çŠ¶æ€**:
- âœ… å‰ç«¯å®¡æ ¸UIå®Œæ•´ï¼ˆ95%ï¼‰
  - âœ… AIå»ºè®®é¢æ¿å±•ç¤º
  - âœ… ä¸‰ç§å¯¹è¯æ¨¡å¼åˆ‡æ¢
  - âœ… é€‰æ‹©/ä¿®æ”¹/å‘é€äº¤äº’
- âš ï¸ åç«¯å†³ç­–é€»è¾‘æ¡†æ¶ï¼ˆ50%ï¼‰
- ğŸ”„ è‡ªåŠ¨åŒ–å†³ç­–è®°å½•ï¼ˆè§„åˆ’ä¸­ï¼‰

**å†³ç­–é€»è¾‘**ï¼ˆå»ºè®®å®ç°ï¼‰:
```python
# Phase 1: æ‰€æœ‰å›å¤éƒ½éœ€è¦äººå·¥å®¡æ ¸ï¼ˆä½†è®°å½•å†³ç­–ç»“æœç”¨äºè®­ç»ƒï¼‰
need_human_review = True  # å›ºå®šä¸ºTrue âœ… å·²å®ç°

# åŒæ—¶è®°å½•è‡ªåŠ¨åŒ–å†³ç­–ï¼ˆç”¨äºæœªæ¥Phase 2å¯ç”¨ï¼‰ ğŸ”„ è§„åˆ’ä¸­
would_auto_send = not (
    overall_confidence < 0.9                    # ç½®ä¿¡åº¦ä¸è¶³
    or sentiment.score < 0.5                    # æƒ…ç»ªæåº¦è´Ÿé¢
    or customer.isVIP                           # VIPå®¢æˆ·
    or customer.riskLevel == "high"             # é«˜é£é™©å®¢æˆ·
    or requirements.length > 2                  # éœ€æ±‚å¤æ‚
    or conversation.mode == "human_first"       # äººå·¥ä¼˜å…ˆæ¨¡å¼
)

# è®°å½•åˆ°æ•°æ®åº“ç”¨äºåˆ†æ
log_automation_decision(conversationId, would_auto_send, reason)
```

**äººå·¥å®¡æ ¸æµç¨‹** (Phase 1æ‰€æœ‰å¯¹è¯) - âœ… UIå·²å®ç°
```
1. WebSocketæ¨é€åˆ°å‰ç«¯:                       âš ï¸ éƒ¨åˆ†å®ç°
   {
     type: "review_required",
     conversationId,
     mode: conversation.mode,  // agent_auto | agent_supervised | human_first
     suggestions: [...],
     context: {
       customerProfile: {...},
       knowledgeRecommendations: [...],
       historicalCases: [...]
     },
     automationDecision: {  // è®°å½•ç”¨äºè®­ç»ƒ
       wouldAutoSend: false,
       reason: "ç½®ä¿¡åº¦0.65ä½äºé˜ˆå€¼0.9"
     }
   }

2. å‰ç«¯æ ¹æ®modeæ¸²æŸ“ä¸åŒUI:                    âœ… å·²å®ç°
   - agent_auto: å¼ºè°ƒ"é‡‡çº³AIå»ºè®®"
   - agent_supervised: å¼ºè°ƒ"é€‰æ‹©æ–¹æ¡ˆ"
   - human_first: å¼ºè°ƒ"è‡ªç”±ç¼–è¾‘"

3. å®¢æœæ“ä½œ:                                   âœ… å·²å®ç°
   - æŸ¥çœ‹AIå»ºè®®ï¼ˆä¸‰ç§æ¨¡å¼å±•ç¤ºæ–¹å¼ä¸åŒï¼‰
   - ä¿®æ”¹æˆ–ç¡®è®¤
   - ç‚¹å‡»"å‘é€å›å¤"

4. è®°å½•å®¡æ ¸ç»“æœï¼ˆç”¨äºæ¨¡å‹è®­ç»ƒï¼‰:              ğŸ”„ è§„åˆ’ä¸­
   {
     conversationId,
     mode: "agent_auto",
     approved: true,
     modified: true,
     modificationRate: 0.3,  // ä¿®æ”¹ç¨‹åº¦
     original: "...",
     final: "...",
     reviewTime: 180s,
     automationDecision: {...}  // å¦‚æœæ˜¯è‡ªåŠ¨æ¨¡å¼ä¼šå¦‚ä½•å†³ç­–
   }
```

> **Phase 2-3 å·®å¼‚**: æœªæ¥é˜¶æ®µï¼Œagent_autoå’Œagent_supervisedæ¨¡å¼ä¸‹ï¼Œé«˜ç½®ä¿¡åº¦å›å¤ä¼šè‡ªåŠ¨å‘é€ï¼Œæ— éœ€äººå·¥å®¡æ ¸ã€‚human_firstæ¨¡å¼æ°¸è¿œéœ€è¦äººå·¥ç¡®è®¤ã€‚

---

#### æ­¥éª¤5: éœ€æ±‚å’Œä»»åŠ¡åˆ›å»º (3ç§’) - âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ60%ï¼‰

**è§¦å‘æ¡ä»¶**: éœ€æ±‚ç½®ä¿¡åº¦ > 0.7

**å®ç°çŠ¶æ€**:
- âœ… å‰ç«¯éœ€æ±‚/ä»»åŠ¡å±•ç¤ºUIï¼ˆ80%ï¼‰
- âš ï¸ åç«¯Requirement/Task CRUDï¼ˆ70%ï¼‰
- âŒ è‡ªåŠ¨åˆ›å»ºè§¦å‘é€»è¾‘ï¼ˆ20%ï¼‰

**æ‰§è¡Œæµç¨‹**ï¼ˆå»ºè®®å®ç°ï¼‰:
```typescript
foreach (requirement in requirements) {
  1. CreateRequirementUseCase.execute({   âš ï¸ åŸºç¡€å®Œæˆ
       customerId,
       conversationId,
       title: requirement.title,
       category: requirement.category,
       priority: requirement.priority,
       source: "conversation"
     })

  2. è§¦å‘äº‹ä»¶: RequirementCreatedEvent   âš ï¸ æ¡†æ¶å·²å»º

  3. RequirementCreatedEventHandler.handle() âŒ å¾…å®ç°
     if (priority in ["urgent", "high"] or source in ["conversation", "customer"]) {
       CreateTaskUseCase.execute({
         title: "éœ€æ±‚è·Ÿè¿›: " + requirement.title,
         priority: mapPriority(requirement.priority),
         requirementId: requirement.id,
         conversationId,
         autoCreated: true
       })
     }

  4. è§¦å‘äº‹ä»¶: TaskCreatedEvent          âš ï¸ æ¡†æ¶å·²å»º
}
```

**è¾“å‡º**:
- Requirementå®ä½“åˆ—è¡¨ï¼ˆCRUDå·²å®ç°ï¼‰
- Taskå®ä½“åˆ—è¡¨ (CRUDå·²å®ç°ï¼Œè‡ªåŠ¨åˆ›å»ºå¾…å®ç°)

**ä¼˜å…ˆçº§æ˜ å°„**ï¼ˆå»ºè®®å®ç°ï¼‰:
- urgent â†’ high
- high â†’ high
- medium â†’ medium
- low â†’ low

---

#### æ­¥éª¤6: å‰ç«¯å±•ç¤º (å®æ—¶) - âœ… å·²å®ç°ï¼ˆ85%ï¼‰

**å®ç°çŠ¶æ€**:
- âš ï¸ WebSocketæ¨é€ï¼ˆ70%ï¼‰
  - âœ… è¿æ¥å»ºç«‹
  - âš ï¸ äº‹ä»¶æ¨é€é€»è¾‘å¾…å®Œå–„
- âœ… å‰ç«¯UIå±•ç¤ºï¼ˆ95%ï¼‰

**WebSocketæ¨é€å†…å®¹**ï¼ˆå»ºè®®å®ç°ï¼‰:
```json
{
  "type": "conversation_update",
  "data": {
    "conversation": {
      "id": "conv123",
      "messages": [...],
    },
    "aiSuggestions": {                  // âš ï¸ AIç”Ÿæˆå¾…å®Œå–„
      "suggestions": [...],
      "confidence": 0.85
    },
    "analysis": {                       // ğŸ”„ AIåˆ†æè§„åˆ’ä¸­
      "sentiment": { "sentiment": "negative", "score": 0.65 },
      "urgency": 85,
      "riskLevel": "medium"
    },
    "knowledgeRecommendations": [...],  // âœ… å·²å®ç°
    "requirements": [...],              // âš ï¸ åŸºç¡€å®Œæˆ
    "tasks": [...]                      // âš ï¸ åŸºç¡€å®Œæˆ
  }
}
```

**å‰ç«¯å±•ç¤º** - âœ… UIå·²å®ç°:
- å·¦ä¾§: å¯¹è¯åˆ—è¡¨æ›´æ–° (æ–°æ¶ˆæ¯æ ‡è®°)
- ä¸­é—´: æ¶ˆæ¯æ°”æ³¡ + AIå»ºè®®é¢æ¿
- å³ä¾§: å®¢æˆ·ç”»åƒ + åˆ†æç»“æœ

---

#### æ­¥éª¤7: å‘é€å›å¤ (3ç§’) - âœ… å·²å®ç°ï¼ˆ85%ï¼‰

**å®ç°çŠ¶æ€**:
- âœ… å‰ç«¯å‘é€æŒ‰é’®å’Œäº¤äº’ï¼ˆ95%ï¼‰
- âœ… åç«¯æ¶ˆæ¯å‘é€APIï¼ˆ80%ï¼‰
- âš ï¸ å¤–éƒ¨IMé›†æˆï¼ˆ60%ï¼‰

**æ‰§è¡Œæµç¨‹**:
```typescript
1. SendMessageUseCase.execute({         âœ… å·²å®ç°
     conversationId,
     content: finalReply,
     senderType: "agent",
     senderId: agentId
   })

2. conversation.sendMessage(finalReply, agentId) âœ… å·²å®ç°
   è§¦å‘: MessageSentEvent

3. è°ƒç”¨å¤–éƒ¨IM API:                     âš ï¸ éƒ¨åˆ†é›†æˆ
   if (channel == "feishu") {
     FeishuClient.sendMessage(customerId, finalReply)
   }

   }
```

**è¾“å‡º**:
- Messageå®ä½“ (senderType=agent) - âœ… å·²å®ç°
- å¤–éƒ¨IMæ¶ˆæ¯å‘é€çŠ¶æ€ - âš ï¸ éƒ¨åˆ†é›†æˆ

**å¼‚å¸¸å¤„ç†**ï¼ˆå»ºè®®å®ç°ï¼‰:
- IM APIå¤±è´¥ â†’ è®°å½•åˆ°æ•°æ®åº“ï¼Œç¨åé‡è¯•

---

#### æ­¥éª¤8: è´¨æ£€è¯„åˆ† (å®æ—¶) - âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ50%ï¼‰

**è§¦å‘æ¡ä»¶**: å›å¤å‘é€å

**å®ç°çŠ¶æ€**:
- âœ… å‰ç«¯è´¨æ£€é¢æ¿UIï¼ˆ90%ï¼‰
- âš ï¸ åç«¯è´¨æ£€æ¡†æ¶ï¼ˆ40%ï¼‰
- âŒ QualityInspectorAgentï¼ˆ0%ï¼‰

**æ‰§è¡Œæµç¨‹**ï¼ˆå»ºè®®å®ç°ï¼‰:
```typescript
1. QualityInspectorAgent.evaluate({     ğŸ”„ è§„åˆ’ä¸­
     conversation,
     latestReply,
     sentimentBefore: 0.65,
     sentimentAfter: å¾…æµ‹
   })

2. è¯„ä¼°ç»´åº¦:                            ğŸ”„ è§„åˆ’ä¸­
   - å¤„ç†è´¨é‡ (0-100åˆ†):
     * å›å¤å®Œæ•´æ€§ (30%)
     * ä¸“ä¸šåº¦ (30%)
     * åˆè§„æ€§ (20%)
     * è¯­æ°”ç¤¼è²Œ (20%)

   - æƒ…ç»ªæ”¹å–„ (0-100%):
     * å®¢æˆ·æƒ…ç»ªå˜åŒ–
     * æ˜¯å¦ç¼“è§£ç„¦è™‘

   - å®¢æˆ·æ»¡æ„åº¦ (1-5æ˜Ÿ):
     * é¢„æµ‹æ»¡æ„åº¦ (å¾…å®¢æˆ·åé¦ˆç¡®è®¤)

3. ç”Ÿæˆè´¨æ£€æŠ¥å‘Š:                        âš ï¸ æ¡†æ¶å·²å»º
   {
     conversationId,
     qualityScore: 92,
     emotionImprovement: 25,
     predictedSatisfaction: 4.2,
     issues: [],
     recommendations: ["åç»­å›è®¿ç¡®è®¤æ»¡æ„åº¦"]
   }

4. if (qualityScore < 70 or issues.length > 0) { ğŸ”„ è§„åˆ’ä¸­
     åˆ›å»ºTask: "è´¨é‡æ”¹è¿›: å›è®¿å®¢æˆ·"
   }
```

**è¾“å‡º**:
- è´¨æ£€æŠ¥å‘Šï¼ˆå‰ç«¯UIå·²å®ç°ï¼‰
- æ”¹è¿›å»ºè®®ï¼ˆè§„åˆ’ä¸­ï¼‰
- åç»­ä»»åŠ¡ (å¯é€‰ï¼Œè§„åˆ’ä¸­)

---

#### æ­¥éª¤9: çŸ¥è¯†æ²‰æ·€ (Phase 3è§„åˆ’) - ğŸ”„ è§„åˆ’ä¸­ï¼ˆ20%ï¼‰

**è§¦å‘æ¡ä»¶**: å¯¹è¯å…³é—­ä¸”æ ‡è®°ä¸º"å…¸å‹æ¡ˆä¾‹"

**å®ç°çŠ¶æ€**: ğŸ”„ Phase 3è§„åˆ’

**æ‰§è¡Œæµç¨‹** (å¾…å®ç°):
```typescript
1. å¯¹è¯æ€»ç»“ç”Ÿæˆ:
   - é—®é¢˜ç±»å‹
   - è§£å†³æ–¹æ¡ˆ
   - å…³é”®æ­¥éª¤
   - é¢„æœŸæ•ˆæœ

2. çŸ¥è¯†åº“æ›´æ–°:
   - è‡ªåŠ¨åˆ›å»ºçŸ¥è¯†æ¡ç›®
   - å…³è”ç›¸ä¼¼æ¡ˆä¾‹
   - æ›´æ–°FAQ

3. çŸ¥è¯†å›¾è°±æ›´æ–°:
   - æ·»åŠ èŠ‚ç‚¹å’Œå…³ç³»
   - æ›´æ–°çƒ­åº¦æƒé‡
```

---

## äºŒã€éœ€æ±‚ç®¡ç†æµç¨‹

> **æ•´ä½“å®Œæˆåº¦**: 55% âš ï¸
> **å‰ç«¯UI**: 80% âš ï¸ | **åç«¯API**: 40% âŒ | **ä¸šåŠ¡é€»è¾‘**: 50% âŒ

### 2.1 æµç¨‹æ¦‚è§ˆ

```
éœ€æ±‚åˆ›å»º (AIæå– or äººå·¥å½•å…¥)    âš ï¸ éƒ¨åˆ†å®ç°
  â†“ (5ç§’)
ä¼˜å…ˆçº§æ™ºèƒ½è¯„ä¼°                    ğŸ”„ è§„åˆ’ä¸­
  â†“ (8ç§’)
å¯è¡Œæ€§åˆ†æ (äº§å“/æŠ€æœ¯éœ€æ±‚)        ğŸ”„ è§„åˆ’ä¸­
  â†“ (å†³ç­–ç‚¹: æ˜¯å¦éœ€è¦äººå·¥ç¡®è®¤?)
äººå·¥ç¡®è®¤ (é«˜ä¼˜å…ˆçº§/ä¸å¯è¡Œ, 24å°æ—¶) âš ï¸ UIå·²å»º
  â†“ (10ç§’)
ä»»åŠ¡æ™ºèƒ½æ‹†åˆ†                      ğŸ”„ è§„åˆ’ä¸­
  â†“ (3ç§’/loop)
æ‰¹é‡åˆ›å»ºTask                      âš ï¸ åŸºç¡€å®Œæˆ
  â†“ (5ç§’)
æ™ºèƒ½åˆ†é…ç»™å·¥ç¨‹å¸ˆ                  ğŸ”„ è§„åˆ’ä¸­
  â†“ (3ç§’)
é€šçŸ¥ç›¸å…³äººå‘˜                      âŒ æœªå®ç°
```

**å®ç°çŠ¶æ€è¯´æ˜**:
- âœ… éœ€æ±‚åˆ—è¡¨UIå’ŒåŸºç¡€CRUDï¼ˆ80%ï¼‰
- âš ï¸ AIè‡ªåŠ¨æå–éœ€æ±‚ï¼ˆ20%ï¼Œæ¡†æ¶å·²å»ºï¼‰
- ğŸ”„ æ™ºèƒ½è¯„ä¼°å’Œåˆ†æï¼ˆè§„åˆ’ä¸­ï¼‰
- âŒ ä»»åŠ¡æ™ºèƒ½æ‹†åˆ†å’Œåˆ†é…ï¼ˆæœªå®ç°ï¼‰

---

### 2.2 å…³é”®å†³ç­–è§„åˆ™ï¼ˆå»ºè®®å®ç°ï¼‰

#### å†³ç­–ç‚¹1: æ˜¯å¦è‡ªåŠ¨åˆ›å»ºTask? - âš ï¸ éƒ¨åˆ†å®ç°

```python
should_auto_create_task = (
    priority in ["urgent", "high"]              # é«˜ä¼˜å…ˆçº§ âš ï¸ åŸºç¡€å®Œæˆ
    or source in ["conversation", "customer"]   # å®¢æˆ·ç›´æ¥æå‡º âš ï¸ åŸºç¡€å®Œæˆ
)

if should_auto_create_task:
    CreateTaskUseCase.execute(...)              # âš ï¸ CRUDå®Œæˆï¼Œè§¦å‘é€»è¾‘å¾…å®ç°
else:
    # æ¨èç»™äº§å“/æŠ€æœ¯è¯„å®¡
    pass
```

#### å†³ç­–ç‚¹2: æ˜¯å¦éœ€è¦äººå·¥ç¡®è®¤? - ğŸ”„ è§„åˆ’ä¸­

```python
need_confirmation = (
    priority == "urgent"                        # ç´§æ€¥éœ€æ±‚
    or feasibility.is_feasible == false         # ä¸å¯è¡Œ
    or estimated_cost > 10äººå¤©                   # æˆæœ¬é«˜
)

if need_confirmation:
    # ç­‰å¾…äººå·¥ç¡®è®¤ (24å°æ—¶è¶…æ—¶)
    HumanInLoopExecutor.wait(timeout=86400000)  # ğŸ”„ è§„åˆ’ä¸­
else:
    # è‡ªåŠ¨æ‰¹å‡†
    pass
```

---

### 2.3 ä»»åŠ¡æ‹†åˆ†ç®—æ³•ï¼ˆå»ºè®®å®ç°ï¼‰ - ğŸ”„ è§„åˆ’ä¸­

```typescript
function breakdownTasks(requirement: Requirement): Task[] {
  const tasks = [];

  // æ ¹æ®éœ€æ±‚ç±»å‹æ‹†åˆ†
  switch (requirement.category) {
    case "product":
      tasks.push(
        { title: "éœ€æ±‚è¯„å®¡", estimatedHours: 2, priority: "high" },
        { title: "åŸå‹è®¾è®¡", estimatedHours: 8, priority: "medium" },
        { title: "å¼€å‘å®ç°", estimatedHours: 40, priority: "medium" },
        { title: "æµ‹è¯•éªŒè¯", estimatedHours: 8, priority: "medium" }
      );
      break;

    case "technical":
      tasks.push(
        { title: "æŠ€æœ¯è°ƒç ”", estimatedHours: 4, priority: "high" },
        { title: "æ–¹æ¡ˆè®¾è®¡", estimatedHours: 8, priority: "high" },
        { title: "ä»£ç å®ç°", estimatedHours: 24, priority: "medium" },
        { title: "Code Review", estimatedHours: 2, priority: "medium" }
      );
      break;

    case "service":
      tasks.push(
        { title: "éœ€æ±‚ç¡®è®¤", estimatedHours: 1, priority: "high" },
        { title: "æ‰§è¡ŒæœåŠ¡", estimatedHours: 4, priority: "high" },
        { title: "å›è®¿åé¦ˆ", estimatedHours: 1, priority: "low" }
      );
      break;
  }

  return tasks;
}
```

---

## ä¸‰ã€æ•…éšœå¤„ç†æµç¨‹

> **æ•´ä½“å®Œæˆåº¦**: 64% âš ï¸
> **å‰ç«¯UI**: 85% âš ï¸ | **åç«¯API**: 50% âš ï¸ | **ä¸šåŠ¡é€»è¾‘**: 60% âš ï¸

### 3.1 æµç¨‹æ¦‚è§ˆ

```
æ•…éšœæŠ¥å‘Š (é£ä¹¦IM)                 âœ… å·²å®ç°
  â†“ (5ç§’)
æå–æ•…éšœä¿¡æ¯ (AI)                 ğŸ”„ è§„åˆ’ä¸­
  â†“ (3ç§’)
æ£€æŸ¥ä¿¡æ¯å®Œæ•´æ€§                    ğŸ”„ è§„åˆ’ä¸­
  â†“ (å†³ç­–ç‚¹: ä¿¡æ¯æ˜¯å¦å®Œæ•´?)
è¯·æ±‚è¡¥å……ä¿¡æ¯ (10åˆ†é’Ÿ)             ğŸ”„ è§„åˆ’ä¸­
  â†“ (5ç§’)
è¯„ä¼°ä¸¥é‡æ€§ (P0-P4)                ğŸ”„ è§„åˆ’ä¸­
  â†“ (5ç§’, å¹¶è¡Œ)
çŸ¥è¯†åº“æœç´¢ + ç›¸ä¼¼æ¡ˆä¾‹æŸ¥æ‰¾         âš ï¸ éƒ¨åˆ†å®ç°
  â†“ (8ç§’)
è¯Šæ–­åˆ†æ                          ğŸ”„ è§„åˆ’ä¸­
  â†“ (8ç§’)
ç”Ÿæˆè§£å†³æ–¹æ¡ˆ                      ğŸ”„ è§„åˆ’ä¸­
  â†“ (å†³ç­–ç‚¹: P0/P1éœ€äººå·¥å®¡æ ¸?)
äººå·¥å®¡æ ¸æ–¹æ¡ˆ (3åˆ†é’Ÿ)              âœ… UIå·²å®ç°
  â†“ (3ç§’)
åˆ›å»ºTask + å‘é€å›å¤               âš ï¸ éƒ¨åˆ†å®ç°
  â†“ (3ç§’)
P0/P1å‘Šè­¦é€šçŸ¥                     âŒ æœªå®ç°
```

**å®ç°çŠ¶æ€è¯´æ˜**:
- âœ… æ•…éšœæŠ¥å‘Šæ¥å…¥UIï¼ˆ85%ï¼‰
- âš ï¸ çŸ¥è¯†åº“æœç´¢ï¼ˆ90%ï¼‰
- ğŸ”„ AIæ•…éšœè¯Šæ–­ï¼ˆè§„åˆ’ä¸­ï¼‰
- âŒ å‘Šè­¦é€šçŸ¥ï¼ˆæœªå®ç°ï¼‰

---

### 3.2 æ•…éšœåˆ†çº§æ ‡å‡†ï¼ˆå»ºè®®å®ç°ï¼‰

| ç­‰çº§ | å®šä¹‰ | å“åº”æ—¶é—´ | å¤„ç†æµç¨‹ | å®ç°çŠ¶æ€ |
|-----|------|---------|---------|---------|
| **P0** | æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨ï¼Œå½±å“æ‰€æœ‰ç”¨æˆ· | 15åˆ†é’Ÿ | å¼ºåˆ¶äººå·¥å®¡æ ¸ + ç«‹å³å‘Šè­¦ | ğŸ”„ è§„åˆ’ä¸­ |
| **P1** | é‡è¦åŠŸèƒ½ä¸å¯ç”¨ï¼Œå½±å“éƒ¨åˆ†ç”¨æˆ· | 1å°æ—¶ | å¼ºåˆ¶äººå·¥å®¡æ ¸ + å‘Šè­¦é€šçŸ¥ | ğŸ”„ è§„åˆ’ä¸­ |
| **P2** | åŠŸèƒ½å¼‚å¸¸ï¼Œæœ‰æ›¿ä»£æ–¹æ¡ˆ | 4å°æ—¶ | AIè‡ªåŠ¨å¤„ç† | ğŸ”„ è§„åˆ’ä¸­ |
| **P3** | æ¬¡è¦åŠŸèƒ½é—®é¢˜ | 1å¤© | AIè‡ªåŠ¨å¤„ç† | ğŸ”„ è§„åˆ’ä¸­ |
| **P4** | ä¼˜åŒ–å»ºè®® | 1å‘¨ | è®°å½•åˆ°éœ€æ±‚æ±  | âš ï¸ åŸºç¡€å®Œæˆ |

---

### 3.3 ä¸¥é‡æ€§è¯„ä¼°ç®—æ³•ï¼ˆå»ºè®®å®ç°ï¼‰ - ğŸ”„ è§„åˆ’ä¸­

```typescript
function assessSeverity(faultInfo: FaultInfo): Severity {
  let score = 0;

  // å½±å“èŒƒå›´ (0-40åˆ†)
  if (faultInfo.impactScope == "all_users") score += 40;
  else if (faultInfo.impactScope == "multiple_users") score += 25;
  else if (faultInfo.impactScope == "single_user") score += 10;

  // åŠŸèƒ½é‡è¦æ€§ (0-30åˆ†)
  if (faultInfo.function == "core") score += 30;
  else if (faultInfo.function == "important") score += 20;
  else if (faultInfo.function == "minor") score += 10;

  // æ˜¯å¦æœ‰æ›¿ä»£æ–¹æ¡ˆ (0-20åˆ†)
  if (!faultInfo.hasWorkaround) score += 20;

  // å®¢æˆ·æƒ…ç»ª (0-10åˆ†)
  if (sentiment.score < 0.3) score += 10;
  else if (sentiment.score < 0.6) score += 5;

  // æ€»åˆ†æ˜ å°„åˆ°ç­‰çº§
  if (score >= 80) return "P0";
  else if (score >= 60) return "P1";
  else if (score >= 40) return "P2";
  else if (score >= 20) return "P3";
  else return "P4";
}
```

---

### 3.4 è§£å†³æ–¹æ¡ˆç”Ÿæˆï¼ˆå»ºè®®å®ç°ï¼‰ - âš ï¸ éƒ¨åˆ†å®ç°

**æ­¥éª¤1: çŸ¥è¯†åº“åŒ¹é…** - âœ… å·²å®ç°ï¼ˆ90%ï¼‰
```sql
SELECT * FROM knowledge
WHERE category = 'troubleshooting'
  AND (
    title LIKE '%{errorMessage}%'
    OR keywords && ARRAY['{keyword1}', '{keyword2}']
  )
ORDER BY usage_count DESC, updated_at DESC
LIMIT 5
```

**æ­¥éª¤2: ç›¸ä¼¼æ¡ˆä¾‹æŸ¥æ‰¾** - ğŸ”„ è§„åˆ’ä¸­
```typescript
function findSimilarCases(faultSignature: string): Case[] {
  // è®¡ç®—æ•…éšœç­¾å
  const signature = hashCode(
    faultInfo.errorMessage +
    faultInfo.stackTrace +
    faultInfo.environment
  );

  // æŸ¥æ‰¾ç›¸ä¼¼ç­¾å
  return historicalCases.filter(c =>
    similarity(c.signature, signature) > 0.8
  ).sort((a, b) => b.successRate - a.successRate);
}
```

**æ­¥éª¤3: æ–¹æ¡ˆåˆæˆ** - ğŸ”„ è§„åˆ’ä¸­
```typescript
function generateSolution(
  diagnosis: Diagnosis,
  knowledge: KnowledgeItem[],
  similarCases: Case[]
): Solution {

  // ç»¼åˆæ¨è
  const solution = {
    steps: [],
    expectedTime: 0,
    successRate: 0,
    customerReply: ""
  };

  // ä¼˜å…ˆä½¿ç”¨æˆåŠŸç‡æœ€é«˜çš„å†å²æ¡ˆä¾‹
  if (similarCases.length > 0 && similarCases[0].successRate > 0.9) {
    solution.steps = similarCases[0].steps;
    solution.successRate = similarCases[0].successRate;
  }
  // å¦åˆ™ä½¿ç”¨çŸ¥è¯†åº“
  else if (knowledge.length > 0) {
    solution.steps = knowledge[0].steps;
    solution.successRate = 0.75; // é»˜è®¤
  }
  // å…œåº•æ–¹æ¡ˆ
  else {
    solution.steps = ["äººå·¥æ’æŸ¥", "è”ç³»æŠ€æœ¯æ”¯æŒ"];
    solution.successRate = 0.5;
  }

  // ç”Ÿæˆå®¢æˆ·å›å¤
  solution.customerReply = generateCustomerReply(solution);

  return solution;
}
```

---

## å››ã€å·¥ä½œæµå¼•æ“æ‰§è¡Œæœºåˆ¶ï¼ˆå»ºè®®æœ€ä½³å®è·µï¼‰

> **è¯´æ˜**: æœ¬ç« èŠ‚æè¿°å»ºè®®çš„å·¥ä½œæµå¼•æ“å®ç°æ–¹æ¡ˆï¼Œä¾¿äºæœªæ¥æ‰©å±•å’Œç»´æŠ¤
> **å®ç°çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ62%ï¼‰- æ¡†æ¶å·²å»ºï¼Œéƒ¨åˆ†åŠŸèƒ½å¾…å®Œå–„

### 4.1 å·¥ä½œæµå®šä¹‰ç»“æ„ï¼ˆå»ºè®®YAMLè§„èŒƒï¼‰

```yaml
name: workflow_name
description: å·¥ä½œæµæè¿°
version: "1.0"

trigger:
  type: im_message | event | manual
  event: EventName (å¯é€‰)
  channel: feishu | wecom (å¯é€‰)

steps:
  - name: step_name
    type: action | parallel | human_in_loop
    agent: agent_name (å¯é€‰)
    action: action_type
    input: $expression
    output: variable_name
    timeout: 5000
    condition: $expression (å¯é€‰)
    loop: $expression (å¯é€‰)
    fallback: default_value (å¯é€‰)

    steps: [...] (parallelç±»å‹)

onError:
  - name: error_handler
    action: log | notify

onComplete:
  - name: completion_handler
    action: log | notify
```

**å®ç°çŠ¶æ€**:
- âš ï¸ YAMLè§£æå™¨ï¼ˆ70%ï¼‰
- âš ï¸ æ­¥éª¤æ‰§è¡Œå™¨æ¡†æ¶ï¼ˆ60%ï¼‰
- ğŸ”„ æ¡ä»¶/å¾ªç¯è¡¨è¾¾å¼å¼•æ“ï¼ˆè§„åˆ’ä¸­ï¼‰
- ğŸ”„ é”™è¯¯å¤„ç†æœºåˆ¶ï¼ˆè§„åˆ’ä¸­ï¼‰

---

### 4.2 æ­¥éª¤æ‰§è¡Œå™¨ï¼ˆå»ºè®®å®ç°ï¼‰

#### ActionStepExecutor - æ™®é€šæ­¥éª¤ - âš ï¸ éƒ¨åˆ†å®ç°

```typescript
async execute(step: WorkflowStep, context: WorkflowContext): Promise<any> {
  // 1. è¯„ä¼°æ¡ä»¶
  if (step.condition && !evaluateCondition(step.condition, context)) {
    return { skipped: true };
  }

  // 2. è¯„ä¼°è¾“å…¥
  const input = evaluateExpression(step.input, context);

  // 3. æ‰§è¡ŒåŠ¨ä½œ
  let result;
  try {
    result = await executeAction(step.action, input, step.timeout);
  } catch (error) {
    if (step.fallback) {
      result = step.fallback;
    } else {
      throw error;
    }
  }

  // 4. ä¿å­˜è¾“å‡º
  if (step.output) {
    context.set(step.output, result);
  }

  return result;
}
```

#### ParallelStepExecutor - å¹¶è¡Œæ­¥éª¤ - âš ï¸ éƒ¨åˆ†å®ç°

```typescript
async execute(step: ParallelStep, context: WorkflowContext): Promise<any> {
  // 1. å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰å­æ­¥éª¤
  const promises = step.steps.map(subStep =>
    executeStep(subStep, context)
  );

  // 2. ç­‰å¾…æ‰€æœ‰å®Œæˆ
  const results = await Promise.all(promises);

  // 3. åˆå¹¶ç»“æœ
  const merged = {};
  step.steps.forEach((subStep, index) => {
    if (subStep.output) {
      merged[subStep.name] = results[index];
    }
  });

  return merged;
}
```

#### HumanInLoopExecutor - äººå·¥å®¡æ ¸ - ğŸ”„ è§„åˆ’ä¸­

```typescript
async execute(step: HumanInLoopStep, context: WorkflowContext): Promise<any> {
  // 1. æ¨é€åˆ°å‰ç«¯
  await websocket.push({
    type: "human_review_required",
    workflowId: context.workflowId,
    stepName: step.name,
    input: step.input,
    timeout: step.timeout
  });

  // 2. ç­‰å¾…äººå·¥å“åº”
  const response = await waitForHumanResponse(
    context.workflowId,
    step.name,
    step.timeout
  );

  // 3. è¶…æ—¶å¤„ç†
  if (!response && step.fallback) {
    return { approved: true, data: step.fallback };
  }

  return response;
}
```

---

### 4.3 è¡¨è¾¾å¼æ±‚å€¼ï¼ˆå»ºè®®å®ç°ï¼‰ - ğŸ”„ è§„åˆ’ä¸­

```typescript
function evaluateExpression(expr: string, context: WorkflowContext): any {
  // æ”¯æŒçš„è¡¨è¾¾å¼:
  // $variable - å˜é‡å¼•ç”¨
  // $object.property - å±æ€§è®¿é—®
  // $array.length - æ•°ç»„é•¿åº¦
  // $variable == "value" - æ¡ä»¶åˆ¤æ–­
  // $variable > 10 - æ•°å€¼æ¯”è¾ƒ

  if (expr.startsWith("$")) {
    const path = expr.substring(1).split(".");
    let value = context.get(path[0]);

    for (let i = 1; i < path.length; i++) {
      value = value?.[path[i]];
    }

    return value;
  }

  return expr;
}
```

---

## äº”ã€äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆå»ºè®®æœ€ä½³å®è·µï¼‰

> **è¯´æ˜**: æœ¬ç« èŠ‚æè¿°å»ºè®®çš„äº‹ä»¶é©±åŠ¨æ¶æ„å®ç°æ–¹æ¡ˆ
> **å®ç°çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ72%ï¼‰- å‰åç«¯EventBuså·²å®ç°ï¼Œäº‹ä»¶æŒä¹…åŒ–å¾…å®Œå–„

### 5.1 äº‹ä»¶å‘å¸ƒæµç¨‹

**å®ç°çŠ¶æ€**:
- âœ… å‰ç«¯EventBusï¼ˆ260è¡Œå®Œæ•´å®ç°ï¼‰
- âš ï¸ åç«¯EventBusï¼ˆå†…å­˜å®ç°ï¼Œå•æœºå¯ç”¨ï¼‰
- ğŸ”„ äº‹ä»¶æŒä¹…åŒ–å’Œé‡æ”¾ï¼ˆè§„åˆ’ä¸­ï¼‰
- ğŸ”„ åˆ†å¸ƒå¼äº‹ä»¶æ€»çº¿ï¼ˆè§„åˆ’ä¸­ï¼‰

**å»ºè®®å®ç°æ–¹æ¡ˆ**:

```typescript
// 1. èšåˆæ ¹å†…è§¦å‘é¢†åŸŸäº‹ä»¶           âœ… å·²å®ç°
class Conversation extends AggregateRoot {
  sendMessage(content: string, senderId: string) {
    // ä¸šåŠ¡é€»è¾‘
    const message = new Message(content, senderId);
    this.messages.push(message);

    // æ·»åŠ é¢†åŸŸäº‹ä»¶ (ä¸ç«‹å³å‘å¸ƒ)
    this.addDomainEvent(new MessageSentEvent({
      conversationId: this.id,
      messageId: message.id,
      senderId,
      content
    }));
  }
}

// 2. Repositoryä¿å­˜å¹¶å‘å¸ƒäº‹ä»¶      âš ï¸ éƒ¨åˆ†å®ç°
class ConversationRepository {
  async save(conversation: Conversation): Promise<void> {
    // åœ¨åŒä¸€äº‹åŠ¡å†…ä¿å­˜èšåˆæ ¹å’Œäº‹ä»¶     ğŸ”„ è§„åˆ’ä¸­
    await this.db.transaction(async (trx) => {
      // ä¿å­˜èšåˆæ ¹
      await trx.save(conversation);

      // ä¿å­˜äº‹ä»¶åˆ°äº‹ä»¶è¡¨
      const events = conversation.getUncommittedEvents();
      await trx.insertMany("domain_events", events);
    });

    // äº‹åŠ¡æäº¤åå‘å¸ƒäº‹ä»¶                âš ï¸ éƒ¨åˆ†å®ç°
    const events = conversation.getUncommittedEvents();
    await this.eventBus.publishAll(events);

    // æ¸…é™¤å·²å‘å¸ƒçš„äº‹ä»¶
    conversation.clearEvents();
  }
}

// 3. EventBusåˆ†å‘ç»™è®¢é˜…è€…            âš ï¸ éƒ¨åˆ†å®ç°
class EventBus {
  async publishAll(events: DomainEvent[]): Promise<void> {
    for (const event of events) {
      const handlers = this.subscribers.get(event.type) || [];

      // å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰å¤„ç†å™¨
      await Promise.all(
        handlers.map(handler =>
          handler.handle(event).catch(error => {
            logger.error("Event handler failed", { event, error });
          })
        )
      );
    }
  }
}
```

---

### 5.2 äº‹ä»¶å¤„ç†å™¨ç¤ºä¾‹ï¼ˆå»ºè®®å®ç°ï¼‰

#### RequirementCreatedEventHandler - éœ€æ±‚åˆ›å»ºå¤„ç† - âš ï¸ éƒ¨åˆ†å®ç°

```typescript
class RequirementCreatedEventHandler {
  async handle(event: RequirementCreatedEvent): Promise<void> {
    const { requirementId, priority, source, conversationId } = event;

    // å†³ç­–: æ˜¯å¦è‡ªåŠ¨åˆ›å»ºTask          âš ï¸ éƒ¨åˆ†å®ç°
    const shouldCreateTask = (
      priority === "urgent" || priority === "high" ||
      source === "conversation" || source === "customer"
    );

    if (!shouldCreateTask) {
      logger.info("Requirement does not meet criteria for auto-task creation");
      return;
    }

    // æ˜ å°„ä¼˜å…ˆçº§
    const taskPriority = this.mapPriority(priority);

    // åˆ›å»ºTask                         âš ï¸ CRUDå®Œæˆï¼Œè§¦å‘é€»è¾‘å¾…å®ç°
    await this.createTaskUseCase.execute({
      title: `éœ€æ±‚è·Ÿè¿›: ${event.title}`,
      priority: taskPriority,
      requirementId,
      conversationId,
      description: "è‡ªåŠ¨åˆ›å»ºçš„è·Ÿè¿›ä»»åŠ¡",
      metadata: {
        autoCreated: true,
        source: "RequirementCreatedEvent"
      }
    });
  }

  private mapPriority(reqPriority: string): string {
    const mapping = {
      "urgent": "high",
      "high": "high",
      "medium": "medium",
      "low": "low"
    };
    return mapping[reqPriority] || "medium";
  }
}
```

#### TaskCompletedEventHandler - ä»»åŠ¡å®Œæˆå¤„ç† - ğŸ”„ è§„åˆ’ä¸­

```typescript
class TaskCompletedEventHandler {
  async handle(event: TaskCompletedEvent): Promise<void> {
    const { taskId, conversationId, qualityScore } = event;

    if (!conversationId) return;

    // æ£€æŸ¥å¯¹è¯æ˜¯å¦å¯ä»¥å…³é—­             ğŸ”„ è§„åˆ’ä¸­
    const conversation = await this.conversationRepo.findById(conversationId);
    const relatedTasks = await this.taskRepo.findByConversationId(conversationId);

    const allCompleted = relatedTasks.every(t => t.status === "completed");

    if (allCompleted && conversation.status === "open") {
      // è‡ªåŠ¨å…³é—­å¯¹è¯
      await this.closeConversationUseCase.execute({
        conversationId,
        resolution: "æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ",
        autoClose: true
      });
    }

    // å¦‚æœè´¨é‡è¯„åˆ†ä½ï¼Œåˆ›å»ºæ”¹è¿›ä»»åŠ¡       ğŸ”„ è§„åˆ’ä¸­
    if (qualityScore && qualityScore < 70) {
      await this.createTaskUseCase.execute({
        title: `è´¨é‡æ”¹è¿›: ä»»åŠ¡ ${taskId}`,
        priority: "medium",
        conversationId,
        description: `è´¨é‡è¯„åˆ†${qualityScore}åˆ†ï¼Œéœ€è¦æ”¹è¿›`
      });
    }
  }
}
```

---

## å…­ã€SAGAæ¨¡å¼ - ConversationTaskCoordinatorï¼ˆå»ºè®®å®ç°ï¼‰

> **è¯´æ˜**: æœ¬ç« èŠ‚æè¿°å»ºè®®çš„SAGAåè°ƒå™¨å®ç°æ–¹æ¡ˆ
> **å®ç°çŠ¶æ€**: ğŸ”„ è§„åˆ’ä¸­ï¼ˆ30%ï¼‰- æ¦‚å¿µè®¾è®¡å®Œæ•´ï¼Œå®è£…å¾…å®Œå–„

### 6.1 æ ¸å¿ƒåè°ƒé€»è¾‘ï¼ˆå»ºè®®å®ç°ï¼‰ - ğŸ”„ è§„åˆ’ä¸­

```typescript
class ConversationTaskCoordinator {
  async processCustomerMessage(request: {
    customerId: string;
    message: string;
    channel: string;
  }): Promise<ProcessingResult> {

    // Step 1: åˆ›å»º/è·å–å¯¹è¯            âœ… å·²å®ç°
    const conversation = await this.getOrCreateConversation(
      request.customerId,
      request.channel
    );

    // Step 2: AIéœ€æ±‚åˆ†æ               ğŸ”„ è§„åˆ’ä¸­
    const requirements = await this.analyzeRequirements(
      request.message,
      conversation.history
    );

    // Step 3: åˆ›å»ºéœ€æ±‚ (é«˜ç½®ä¿¡åº¦)      âš ï¸ éƒ¨åˆ†å®ç°
    const createdRequirements = [];
    for (const req of requirements.filter(r => r.confidence > 0.7)) {
      const created = await this.createRequirementUseCase.execute({
        customerId: request.customerId,
        conversationId: conversation.id,
        title: req.title,
        category: req.category,
        priority: req.priority
      });
      createdRequirements.push(created);
    }

    // Step 4: Agentç”Ÿæˆå›å¤å»ºè®®        âš ï¸ éƒ¨åˆ†å®ç°
    const suggestions = await this.generateReplySuggestions(
      request.message,
      requirements,
      conversation
    );

    // Step 5: è¯„ä¼°æ˜¯å¦éœ€è¦äººå·¥å®¡æ ¸     âš ï¸ éƒ¨åˆ†å®ç°
    const needsReview = this.evaluateNeedsReview(
      suggestions,
      createdRequirements,
      conversation
    );

    // Step 6: æ¨é€ç»“æœ                  âš ï¸ éƒ¨åˆ†å®ç°
    if (needsReview) {
      await this.pushForHumanReview({
        conversationId: conversation.id,
        suggestions,
        requirements: createdRequirements,
        reason: "ç½®ä¿¡åº¦ä¸è¶³æˆ–éœ€æ±‚å¤æ‚"
      });
    }

    return {
      conversationId: conversation.id,
      suggestions,
      requirements: createdRequirements,
      needsReview
    };
  }

  private evaluateNeedsReview(
    suggestions: Suggestion[],
    requirements: Requirement[],
    conversation: Conversation
  ): boolean {
    const avgConfidence = suggestions.reduce((sum, s) => sum + s.confidence, 0) / suggestions.length;

    return (
      avgConfidence < 0.8 ||                    // ç½®ä¿¡åº¦ä½
      requirements.length > 2 ||                 // éœ€æ±‚å¤æ‚
      conversation.customer.isVIP ||             // VIPå®¢æˆ·
      conversation.customer.riskLevel === "high" // é«˜é£é™©å®¢æˆ·
    );
  }
}
```

---

## ä¸ƒã€å…³é”®æŒ‡æ ‡ç›‘æ§ï¼ˆå»ºè®®å®ç°ï¼‰

> **å®ç°çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å®ç°ï¼ˆ40%ï¼‰- åŸºç¡€æŠ¥è¡¨UIå®Œæˆï¼Œå®æ—¶ç›‘æ§å¾…å®ç°

### 7.1 å®æ—¶æŒ‡æ ‡ - ğŸ”„ è§„åˆ’ä¸­

| æŒ‡æ ‡ | è®¡ç®—æ–¹å¼ | å‘Šè­¦é˜ˆå€¼ | å®ç°çŠ¶æ€ |
|-----|---------|---------|---------|
| **å¹³å‡å“åº”æ—¶é—´** | sum(response_time) / count | >2åˆ†é’Ÿ | ğŸ”„ è§„åˆ’ä¸­ |
| **AIç½®ä¿¡åº¦** | avg(confidence) | <0.7 | ğŸ”„ è§„åˆ’ä¸­ |
| **äººå·¥ä»‹å…¥ç‡** | human_reviews / total | >30% | ğŸ”„ è§„åˆ’ä¸­ |
| **è´¨æ£€å¹³å‡åˆ†** | avg(quality_score) | <80åˆ† | ğŸ”„ è§„åˆ’ä¸­ |

### 7.2 æ—¥æŠ¥æŒ‡æ ‡ - âš ï¸ éƒ¨åˆ†å®ç°

| æŒ‡æ ‡ | è®¡ç®—æ–¹å¼ | ç›®æ ‡å€¼ | å®ç°çŠ¶æ€ |
|-----|---------|--------|---------|
| **å¯¹è¯å¤„ç†é‡** | count(conversations) | >100å•/å¤© | âš ï¸ UIå·²å»º |
| **é¦–æ¬¡è§£å†³ç‡** | first_solved / total | >80% | âš ï¸ UIå·²å»º |
| **å®¢æˆ·æ»¡æ„åº¦** | avg(satisfaction) | >4.5/5 | âš ï¸ UIå·²å»º |
| **çŸ¥è¯†å¤ç”¨ç‡** | used_kb / total | >70% | âš ï¸ UIå·²å»º |
| **è‡ªåŠ¨åŒ–ç‡** | auto_resolved / total | >60% | ğŸ”„ è§„åˆ’ä¸­ |

**å®ç°çŠ¶æ€è¯´æ˜**:
- âœ… æŠ¥è¡¨ä¸­å¿ƒUIï¼ˆ4ä¸ªåŸºç¡€å¡ç‰‡ï¼‰
- âš ï¸ é™æ€æ•°æ®å±•ç¤º
- âŒ å®æ—¶æ•°æ®èšåˆAPIï¼ˆæœªå®ç°ï¼‰
- âŒ å‘Šè­¦é€šçŸ¥ï¼ˆæœªå®ç°ï¼‰

---

## é™„å½•A: å®Œæˆåº¦è¯¦ç»†è¯„ä¼°

### A.1 å®¢æˆ·å’¨è¯¢å¤„ç†æµç¨‹

| æ­¥éª¤ | å‰ç«¯UI | åç«¯API | ä¸šåŠ¡é€»è¾‘ | å®Œæˆåº¦ |
|-----|--------|---------|----------|--------|
| æ¶ˆæ¯æ¥å…¥ä¸å¯¹è¯åˆ›å»º | 95% âœ… | 85% âœ… | 90% âœ… | **90%** âœ… |
| AIå¹¶è¡Œåˆ†æ | 80% âš ï¸ | 40% âŒ | 50% âŒ | **57%** âš ï¸ |
| æ™ºèƒ½å›å¤ç”Ÿæˆ | 95% âœ… | 40% âŒ | 55% âš ï¸ | **63%** âš ï¸ |
| éœ€æ±‚å’Œä»»åŠ¡åˆ›å»º | 80% âš ï¸ | 70% âš ï¸ | 50% âŒ | **67%** âš ï¸ |
| å‰ç«¯å±•ç¤ºä¸æ¨é€ | 95% âœ… | 70% âš ï¸ | 75% âš ï¸ | **80%** âš ï¸ |
| å®¢æœå®¡æ ¸ç¡®è®¤ | 95% âœ… | 80% âš ï¸ | 85% âœ… | **87%** âœ… |
| å‘é€å›å¤ | 95% âœ… | 80% âš ï¸ | 85% âœ… | **87%** âœ… |
| è´¨æ£€è¯„åˆ† | 90% âœ… | 40% âŒ | 50% âŒ | **60%** âš ï¸ |
| çŸ¥è¯†æ²‰æ·€ | 0% âŒ | 0% âŒ | 20% âŒ | **7%** âŒ |
| **å¹³å‡** | **81%** | **56%** | **62%** | **66%** |

### A.2 éœ€æ±‚ç®¡ç†æµç¨‹

| åŠŸèƒ½ | å‰ç«¯UI | åç«¯API | ä¸šåŠ¡é€»è¾‘ | å®Œæˆåº¦ |
|-----|--------|---------|----------|--------|
| éœ€æ±‚åˆ›å»ºï¼ˆäººå·¥ï¼‰ | 85% âœ… | 70% âš ï¸ | 75% âš ï¸ | **77%** âš ï¸ |
| éœ€æ±‚åˆ›å»ºï¼ˆAIï¼‰ | 80% âš ï¸ | 20% âŒ | 30% âŒ | **43%** âŒ |
| ä¼˜å…ˆçº§è¯„ä¼° | 70% âš ï¸ | 30% âŒ | 40% âŒ | **47%** âŒ |
| å¯è¡Œæ€§åˆ†æ | 0% âŒ | 0% âŒ | 0% âŒ | **0%** âŒ |
| ä»»åŠ¡æ‹†åˆ† | 0% âŒ | 0% âŒ | 0% âŒ | **0%** âŒ |
| ä»»åŠ¡åˆ›å»º | 90% âœ… | 70% âš ï¸ | 75% âš ï¸ | **78%** âš ï¸ |
| æ™ºèƒ½åˆ†é… | 70% âš ï¸ | 20% âŒ | 30% âŒ | **40%** âŒ |
| **å¹³å‡** | **56%** | **30%** | **36%** | **41%** |

### A.3 æ•…éšœå¤„ç†æµç¨‹

| åŠŸèƒ½ | å‰ç«¯UI | åç«¯API | ä¸šåŠ¡é€»è¾‘ | å®Œæˆåº¦ |
|-----|--------|---------|----------|--------|
| æ•…éšœæŠ¥å‘Šæ¥å…¥ | 95% âœ… | 85% âœ… | 90% âœ… | **90%** âœ… |
| æ•…éšœä¿¡æ¯æå– | 0% âŒ | 0% âŒ | 0% âŒ | **0%** âŒ |
| ä¸¥é‡æ€§è¯„ä¼° | 0% âŒ | 0% âŒ | 0% âŒ | **0%** âŒ |
| çŸ¥è¯†åº“æœç´¢ | 95% âœ… | 90% âœ… | 92% âœ… | **92%** âœ… |
| ç›¸ä¼¼æ¡ˆä¾‹æŸ¥æ‰¾ | 0% âŒ | 0% âŒ | 0% âŒ | **0%** âŒ |
| æ–¹æ¡ˆç”Ÿæˆ | 80% âš ï¸ | 40% âŒ | 50% âŒ | **57%** âš ï¸ |
| äººå·¥å®¡æ ¸ | 95% âœ… | 80% âš ï¸ | 85% âœ… | **87%** âœ… |
| å‘Šè­¦é€šçŸ¥ | 0% âŒ | 0% âŒ | 0% âŒ | **0%** âŒ |
| **å¹³å‡** | **46%** | **37%** | **40%** | **41%** |

---

## é™„å½•B: å¾…å®Œå–„åŠŸèƒ½æ¸…å•ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### P0çº§ï¼ˆå½±å“æ ¸å¿ƒåŠŸèƒ½ï¼‰ - ç«‹å³ä¿®å¤

1. **AIå¹¶è¡Œåˆ†æé“¾è·¯æ‰“é€š** ğŸ”´
   - SentimentAnalyzerAgentå®è£…
   - RequirementCollectorAgentå®è£…
   - å®Œæˆåº¦æå‡: 57% â†’ 85%

2. **WebSocketäº‹ä»¶æ¨é€å®Œå–„** ğŸ”´
   - è¡¥å®Œäº‹ä»¶æ¨é€é€»è¾‘
   - ç¡®ä¿æ¶ˆæ¯ã€å»ºè®®ã€åˆ†æå®æ—¶æ›´æ–°
   - å®Œæˆåº¦æå‡: 70% â†’ 90%

   - WebSocketæ¨é€å‘Šè­¦
   - å®Œæˆåº¦æå‡: 0% â†’ 80%

### P1çº§ï¼ˆå½±å“åŠŸèƒ½å®Œæ•´æ€§ï¼‰ - æœ¬å‘¨ä¿®å¤

4. **AIå›å¤ç”Ÿæˆæ¨¡å‹é›†æˆ** ğŸŸ¡
   - å¯¹æ¥OpenAI GPT-4æˆ–Claude 3.5
   - æå‡å›å¤å»ºè®®è´¨é‡
   - å®Œæˆåº¦æå‡: 60% â†’ 85%

5. **éœ€æ±‚å’Œä»»åŠ¡è‡ªåŠ¨åˆ›å»ºè§¦å‘å™¨** ğŸŸ¡
   - å®ç°RequirementCreatedEventHandler
   - è‡ªåŠ¨åˆ›å»ºTaské€»è¾‘
   - å®Œæˆåº¦æå‡: 60% â†’ 85%

6. **è´¨æ£€Agentå®è£…** ğŸŸ¡
   - QualityInspectorAgentå¼€å‘
   - è´¨æ£€è¯„åˆ†ç®—æ³•
   - å®Œæˆåº¦æå‡: 50% â†’ 80%

### P2çº§ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰ - 2-4å‘¨

7. **æ•…éšœè¯Šæ–­AIèƒ½åŠ›** ğŸŸ¢
   - æ•…éšœä¿¡æ¯æå–
   - ä¸¥é‡æ€§è¯„ä¼°ç®—æ³•
   - ç›¸ä¼¼æ¡ˆä¾‹æŸ¥æ‰¾
   - å®Œæˆåº¦æå‡: 41% â†’ 70%

8. **å·¥ä½œæµå¼•æ“å®Œå–„** ğŸŸ¢
   - æ¡ä»¶/å¾ªç¯è¡¨è¾¾å¼å¼•æ“
   - HumanInLoopExecutorå®è£…
   - å®Œæˆåº¦æå‡: 62% â†’ 85%

9. **äº‹ä»¶æŒä¹…åŒ–å’Œé‡æ”¾** ğŸŸ¢
   - äº‹ä»¶å­˜å‚¨åˆ°æ•°æ®åº“
   - äº‹ä»¶é‡æ”¾æœºåˆ¶
   - å®Œæˆåº¦æå‡: 72% â†’ 90%

10. **çŸ¥è¯†è‡ªåŠ¨æ²‰æ·€** ğŸŸ¢
    - Phase 3è§„åˆ’
    - å¯¹è¯æ€»ç»“ç”Ÿæˆ
    - çŸ¥è¯†åº“è‡ªåŠ¨æ›´æ–°
    - å®Œæˆåº¦æå‡: 7% â†’ 60%

---

## é™„å½•C: å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|-----|------|---------|------|
| v1.0 | 2025-12-26 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´ä¸šåŠ¡æµç¨‹è®¾è®¡ | Claude |
| v2.0 | 2026-01-14 | **å…¨é¢æ›´æ–°**ï¼š<br>1. **åŸºäºWebå‰ç«¯å®é™…å®ç°æ›´æ–°æµç¨‹æè¿°**ï¼ˆæ ‡æ³¨å®ç°çŠ¶æ€ï¼‰<br>2. **ä¿æŒæŠ€æœ¯æ¶æ„ä½œä¸ºå»ºè®®æœ€ä½³å®è·µ**ï¼ˆå·¥ä½œæµå¼•æ“ã€äº‹ä»¶é©±åŠ¨ã€SAGAï¼‰<br>3. **æ–°å¢æµç¨‹å®Œæˆåº¦æ€»è§ˆè¡¨**ï¼ˆå‰ç«¯UI/åç«¯API/ä¸šåŠ¡é€»è¾‘/æ•´ä½“ï¼‰<br>4. **æ ‡æ³¨æ¯ä¸ªæ­¥éª¤çš„å®ç°çŠ¶æ€**ï¼ˆâœ…å·²å®ç°/âš ï¸éƒ¨åˆ†å®ç°/âŒæœªå®ç°/ğŸ”„è§„åˆ’ä¸­ï¼‰<br>5. **æ–°å¢å®Œæ•´æ¡ˆä¾‹æ¼”ç¤ºçš„å®ç°çŠ¶æ€**<br>6. **æ–°å¢é™„å½•A-C**ï¼ˆå®Œæˆåº¦è¯¦ç»†è¯„ä¼°/å¾…å®Œå–„åŠŸèƒ½æ¸…å•/å˜æ›´è®°å½•ï¼‰<br>7. **æ›´æ–°çŠ¶æ€ä¸º"éƒ¨åˆ†å®ç°ï¼ˆæ•´ä½“å®Œæˆåº¦73%â†’65%ï¼‰"**<br>8. **è°ƒæ•´å®Œæˆåº¦è¯„ä¼°æ›´åŠ ä¿å®ˆå‡†ç¡®** | Claude |

---

**æ–‡æ¡£ç»“æŸ**

è¿™ä»½ä¸šåŠ¡æµç¨‹è®¾è®¡æ–‡æ¡£å…¨é¢æè¿°äº†æ™ºèƒ½å”®åå·¥ä½œå°çš„æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼ŒåŒ…æ‹¬å®¢æˆ·å’¨è¯¢å¤„ç†ã€éœ€æ±‚ç®¡ç†ã€æ•…éšœå¤„ç†ä¸‰å¤§ä¸»æµç¨‹ï¼Œä»¥åŠå·¥ä½œæµå¼•æ“ã€äº‹ä»¶é©±åŠ¨æ¶æ„å’ŒSAGAåè°ƒå™¨ä¸‰å¤§æŠ€æœ¯æœºåˆ¶ã€‚

**å½“å‰çŠ¶æ€**: éƒ¨åˆ†å®ç°ï¼ˆæ•´ä½“å®Œæˆåº¦65%ï¼‰ï¼Œå‰ç«¯UIå®Œæˆåº¦87%ï¼Œåç«¯APIå®Œæˆåº¦56%ï¼Œä¸šåŠ¡é€»è¾‘å®Œæˆåº¦64%ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**: å‰ç«¯UIå®Œæ•´åº¦é«˜ï¼Œç”¨æˆ·ä½“éªŒæ¡†æ¶å®Œå–„ï¼Œä¸‰ç§å¯¹è¯æ¨¡å¼äº¤äº’æµç¨‹å®Œæ•´å¯ç”¨ã€‚

**å…³é”®å¾…å®Œå–„**: AIæœåŠ¡æ·±åº¦é›†æˆï¼ˆæƒ…æ„Ÿåˆ†æã€éœ€æ±‚æ£€æµ‹ã€è´¨æ£€è¯„åˆ†ï¼‰ã€è‡ªåŠ¨åŒ–è§¦å‘é€»è¾‘ã€å‘Šè­¦é€šçŸ¥æœºåˆ¶ã€‚

å»ºè®®æŒ‰ç…§P0 â†’ P1 â†’ P2ä¼˜å…ˆçº§é€æ­¥å®Œå–„ï¼Œé¢„è®¡4-6å‘¨å¯è¾¾åˆ°æ ¸å¿ƒæµç¨‹åŸºæœ¬å¯ç”¨ï¼ˆ80%+å®Œæˆåº¦ï¼‰ã€‚
