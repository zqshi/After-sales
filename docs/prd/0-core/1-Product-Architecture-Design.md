# 智能售后工作台 - 产品顶层方案设计 & 产品架构设计

> **文档类型**: 产品顶层设计文档
> **项目名称**: 智能售后工作台 (After-Sales Intelligence Platform)
> **文档版本**: v1.6
> **更新日期**: 2026-01-14
> **文档所有者**: 产品架构团队
> **机密级别**: 内部公开

---

## 📋 文档导航

- [一、产品愿景与定位](#一产品愿景与定位)
- [二、产品架构设计](#二产品架构设计)
- [三、核心能力矩阵](#三核心能力矩阵)
- [四、产品架构层次](#四产品架构层次)
- [五、关键技术选型](#五关键技术选型)
- [六、产品演进路线](#六产品演进路线)
- [七、附录](#七附录)

---

## 一、产品愿景与定位

### 1.1 产品愿景

**使命 (Mission):**
> 让每一个客户问题都能得到快速、准确、有温度的响应，让企业售后服务从成本中心转变为价值中心。

**愿景 (Vision):**
> 成为企业级AI赋能售后服务领域的标杆产品，以“人机协同”的方式提升效率与质量。

**价值观 (Values):**
- **客户第一**: 以客户满意度与响应时效为核心
- **智能驱动**: AI作为辅助决策能力，非直接替代
- **开放生态**: 能与企业现有系统协同与集成
- **持续进化**: 通过需求沉淀与知识更新不断优化

### 1.2 产品定位

**一句话定位:**
```
AI辅助的企业级售后服务智能工作台，聚合多渠道对话，
提供知识、质检、需求沉淀与运营报表，帮助企业提升
响应效率与客户满意度。
```

**目标市场:**

| 市场分层 | 目标客户 | 规模特征 | 痛点需求 |
|---------|---------|---------|---------|
| **首要市场** | B2B SaaS企业 | • 客服团队20-200人<br>• 年服务10万+客户 | • 技术问题重复率高<br>• 知识分散难复用 |
| **次要市场** | 在线教育平台 | • 客服团队50-500人<br>• 高峰期咨询集中 | • 标准话术难统一<br>• 质量参差不齐 |
| **潜在市场** | 金融科技/电商 | • 客服团队100-1000人<br>• 合规要求严格 | • 合规风险管控难<br>• 质检成本高 |

**用户画像（典型）:**

```
👤 一线客服 Lucy (核心用户)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
痛点:
  • 多系统切换、回复质量不稳定
  • 重复问题占比高、知识检索成本高
期望:
  • AI推荐回复话术与排查方案
  • 统一工作台与历史对话回溯

👤 质检专员 Mike (管理用户)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
痛点:
  • 质检效率低、难以量化评估
  • 复盘资料分散、问题难定位
期望:
  • 质检维度评分与洞察建议
  • 高风险对话可快速筛查

👤 产品经理 Sarah (决策用户)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
痛点:
  • 需求分散在对话中，难以系统化沉淀
期望:
  • 需求识别与趋势分析
  • 可转化为产品改进输入
```

### 1.3 核心价值主张

**对企业的价值 (ROI示例):**

```
投入成本                      产出价值 (首年)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💰 系统采购: ¥100万/年        💎 人效提升: 节省8人 = ¥240万/年
💰 实施费用: ¥50万            💎 SLA达成提升: 减少投诉成本 ¥60万/年
💰 培训成本: ¥10万            💎 客户留存提升: 减少流失 ¥150万/年
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
总投入: ¥160万               总产出: ¥450万
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ROI = (450 - 160) / 160 = 181%
投资回收期: 4.3个月
```

**对一线客服的价值:**

| 指标 | 改进前 | 改进后 | 提升 |
|-----|--------|--------|------|
| 日均处理对话数 | 30个 | 45个 | **+50%** |
| 平均响应时间 | 8分钟 | 3分钟 | **-62.5%** |
| 知识查找时间 | 5分钟/次 | 30秒/次 | **-90%** |
| 回复质量评分 | 3.8/5 | 4.5/5 | **+18%** |
| 系统切换次数 | 15次/天 | 3次/天 | **-80%** |

**对管理层的价值:**

| 指标 | 改进前 | 改进后 | 提升 |
|-----|--------|--------|------|
| SLA达成率 | 75% | 92% | **+17%** |
| 任务派发效率 | 30分钟/次 | 30秒/次 | **-99%** |
| 质检覆盖率 | 10% | 100% | **+90%** |
| 月度报表制作时间 | 10小时 | 10分钟 | **-98%** |
| 团队管理效率 | 手动 | 智能化 | **10x** |

---

## 二、产品架构设计

### 2.1 产品架构全景图（全局视角，详细版）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         智能售后工作台 - 产品架构全景                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌─────────────────────── 用户层 (User Layer) ──────────────────────────┐  │
│  │                                                                        │  │
│  │  👤 一线客服     👤 质检专员     👤 产品经理     👤 管理层            │  │
│  │  (对话处理)     (质检复盘)      (需求分析)      (运营报表)           │  │
│  │                                                                        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                   ↕ WebSocket + REST                         │
│  ┌─────────────────────── 前端工作台层 (Workbench) ─────────────────────┐  │
│  │  四栏布局: Dock导航 + 左侧列表 + 主内容区 + 右侧抽屉                   │  │
│  │  Dock: 消息/知识/工具/报表                                            │  │
│  │  抽屉: 经典分析/AI辅助/质检                                           │  │
│  │  只读聚合: 外部IM不直接回发，仅内部协作与备注                         │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                   ↕ 业务编排                                 │
│  ┌─────────────────────── 业务应用层 (Application Layer) ───────────────┐  │
│  │                                                                        │  │
│  │  对话中心   客户中心   知识中心   质检中心   需求中心   报表中心   工具中心 │  │
│  │                                                                        │  │
│  │  • 多渠道聚合     • 客户画像      • 文档/FAQ    • 质检评分            │  │
│  │  • 只读协作       • 历史对话      • 知识检索    • 复盘洞察            │  │
│  │  • AI入口         • 客户等级      • 一键复制    • 质检报告            │  │
│  │  • 任务视图联动   • 合同指标      • 自动沉淀    • 需求检测            │  │
│  │                                                                        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                   ↕ 事件/指标/日志                             │
│  ┌──────────────────── 智能与平台能力层 (Foundation) ──────────────────┐  │
│  │                                                                        │  │
│  │  智能能力: 情感分析 / 需求检测 / 知识推荐 / 质检评分 / 知识沉淀 / 任务解析 │  │
│  │  平台能力: 错误处理 / 性能优化 / 安全合规 / 审计日志 / 监控告警        │  │
│  │                                                                        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                   ↕ 数据与基础设施                             │
│  ┌─────────────────────── 基础设施层 (Infrastructure) ─────────────────┐  │
│  │ PostgreSQL | Redis | Milvus | MinIO | Prometheus | 外部IM适配        │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 核心模块架构（模块级视角，详细版）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                             核心模块架构                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│  对话中心                                                               知识中心│
│  ┌──────────────────────────┐                                     ┌──────────────────────────┐
│  │ 对话列表/筛选/搜索        │                                     │ 知识管理(文档/FAQ)        │
│  │ 只读聚合与内部备注        │                                     │ 知识应用(检索/复制)        │
│  │ AI入口(回复建议/澄清等)   │                                     │ 知识自动沉淀(阶段二)       │
│  └───────────┬──────────────┘                                     └───────────┬──────────────┘
│              │                                                                  │
│              ▼                                                                  ▼
│  客户中心                                                           质检中心
│  ┌──────────────────────────┐                                     ┌──────────────────────────┐
│  │ 客户画像与等级            │                                     │ 质检概览与评分            │
│  │ 合同指标与历史对话        │                                     │ 维度评分与洞察            │
│  └───────────┬──────────────┘                                     └───────────┬──────────────┘
│              │                                                                  │
│              ▼                                                                  ▼
│  需求中心                                                           报表中心
│  ┌──────────────────────────┐                                     ┌──────────────────────────┐
│  │ 需求卡片生成与状态        │                                     │ 核心指标卡片              │
│  │ 趋势统计与导出            │                                     │ 7天趋势图                 │
│  └───────────┬──────────────┘                                     └───────────┬──────────────┘
│              │                                                                  │
│              ▼                                                                  ▼
│  工具中心                                                           平台基础能力
│  ┌──────────────────────────┐                                     ┌──────────────────────────┐
│  │ 系统巡检与协作入口        │                                     │ 错误处理与重连            │
│  │ 操作日志与反馈            │                                     │ 性能优化与审计            │
│  └──────────────────────────┘                                     └──────────────────────────┘
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.3 业务流程链路（闭环视角）

```
对话进入 → 对话处理(只读协作) → AI建议 → 质检评分 → 需求检测 → 报表决策
                     ↓                        ↓             ↓
                 知识检索                  质检报告       需求趋势
                     ↓                        ↓             ↓
                  知识沉淀(阶段二)     复盘改进      反馈到知识更新
```

### 2.4 产品能力地图（全局能力视角）

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                产品能力地图                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│  体验层能力:                                                                 │
│  • 多角色入口  • 四栏工作台  • 右侧抽屉  • 快捷入口                           │
│                                                                               │
│  业务能力:                                                                    │
│  • 对话管理  • 客户画像  • 质检复盘  • 需求检测  • 报表中心  • 工具中心       │
│                                                                               │
│  知识能力:                                                                    │
│  • 文档/FAQ管理  • 检索与复制  • 自动沉淀  • 知识复用率监控                  │
│                                                                               │
│  智能能力:                                                                    │
│  • AI建议  • 需求检测  • 质检评分  • 知识推荐  • 任务解析                     │
│                                                                               │
│  平台能力:                                                                    │
│  • 性能优化  • 稳定性  • 审计  • 监控告警                                      │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.5 智能能力矩阵（现状与目标）

| 智能能力 | 关键任务 | 目标指标 | 阶段 |
|---------|---------|---------|------|
| 知识检索 | 关键词/场景检索 | 检索响应 <1s | 阶段一/三 |
| 知识沉淀 | 对话抽取+审核 | 召回>70%、精确>80% | 阶段二 |
| 需求检测 | 需求卡片生成 | 识别准确率>80% | 阶段三 |
| 质检评分 | 维度评分与洞察 | 质检响应 <3s | 阶段二/三 |
| 任务解析 | 自然语言任务解析 | 解析准确率>85% | 阶段二 |

---

## 三、核心能力矩阵

### 3.1 产品能力矩阵（按阶段）

| 能力域 | 阶段一（工作台骨架） | 阶段二（智能化增强） | 阶段三（运营闭环） |
|---|---|---|---|
| 对话管理 | 列表/筛选/只读协作 | AI建议增强 | 与质检/需求联动 |
| 客户画像 | 客户信息/历史对话 | 画像辅助分析 | 运营指标联动 |
| 知识能力 | 基础检索 | 自动沉淀 | 管理+应用闭环 |
| 质检能力 | 基础面板 | 自动质检与报告 | 质检复盘完善 |
| 需求能力 | - | - | 需求检测与趋势 |
| 报表与工具 | - | 数据看板 | 报表与协作入口完善 |
| 平台基础 | 错误处理/重连 | 性能优化 | 安全审计合规 |

### 3.2 关键指标体系（目标方向）

| 指标类别 | 目标方向 |
|---------|---------|
| 效率指标 | 响应时效提升、重复问题处理成本下降 |
| 质量指标 | 质检评分提升、问题可追溯 |
| 运营指标 | 需求趋势清晰、报表可用 |
| 技术指标 | 稳定性与性能达标 |

---

## 四、产品架构层次

### 4.1 架构分层模型 (L0-L4)

```
┌─────────────────────────────────────────────────────────────┐
│                    L0 - 战略层 (Strategic)                    │
├─────────────────────────────────────────────────────────────┤
│  • 产品愿景与定位                                             │
│  • 目标市场与用户画像                                         │
│  • 竞争策略与差异化                                           │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    L1 - 业务层 (Business)                     │
├─────────────────────────────────────────────────────────────┤
│  • 核心业务流程 (对话处理 → 质检 → 需求沉淀 → 报表决策)       │
│  • 业务能力地图 (对话/知识/质检/需求/报表/工具)               │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    L2 - 应用层 (Application)                  │
├─────────────────────────────────────────────────────────────┤
│  • 功能模块编排与界面交互                                    │
│  • 事件协调与跨模块联动                                      │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    L3 - 领域层 (Domain)                       │
├─────────────────────────────────────────────────────────────┤
│  • 限界上下文与领域模型                                       │
│  • 领域事件驱动                                               │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                L4 - 基础设施层 (Infrastructure)                │
├─────────────────────────────────────────────────────────────┤
│  • 数据存储、消息总线、监控与外部集成                         │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 关键架构决策记录 (ADR)

#### ADR-001: 采用DDD架构模式

**背景**: 业务复杂度高、跨模块协作多

**决策**: 采用DDD架构，明确限界上下文与领域模型

**影响**:
- ✅ 模块边界清晰
- ✅ 需求变更影响可控

#### ADR-002: AI能力采用分层策略

**背景**: 需要在准确率与成本之间平衡

**决策**: 以规则与检索为基础，复杂场景引入LLM兜底

**影响**:
- ✅ 成本可控
- ✅ 响应可预测

#### ADR-003: 采用Outbox模式保证事件可靠性

**背景**: 领域事件丢失会导致业务不一致

**决策**: 使用Outbox模式保障事件投递可靠

**影响**:
- ✅ 事件可追溯
- ✅ 事务一致性提升

#### ADR-004: 前端采用Vanilla JS

**背景**: 需要轻量可控的前端架构

**决策**: 使用Vanilla JS + Vite，减少框架复杂度

**影响**:
- ✅ 体积小、性能好
- ⚠️ 生态能力有限

---

## 五、关键技术选型

### 5.1 技术栈全景

```
┌─────────────────────────────────────────────────────────────┐
│                      技术栈全景 (现状)                        │
├─────────────────────────────────────────────────────────────┤
│  [前端技术栈]                                                 │
│  • Vanilla JavaScript (ES2022+)                              │
│  • Vite 5.x                                                  │
│  • Tailwind CSS 3.x                                          │
│  • WebSocket + 心跳重连                                      │
│                                                               │
│  [后端技术栈]                                                 │
│  • TypeScript 5.x                                            │
│  • Fastify 4.x                                               │
│  • TypeORM 0.3                                               │
│                                                               │
│  [数据存储]                                                   │
│  • PostgreSQL 15                                             │
│  • Redis 7                                                   │
│  • Milvus 2.3                                                │
│  • MinIO                                                     │
│                                                               │
│  [监控与告警]                                                 │
│  • Prometheus + Grafana                                      │
│                                                               │
│  [AI能力]                                                    │
│  • LLM API (可配置)                                          │
│  • 向量检索 (Milvus)                                         │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 技术栈组成详解

| 层级 | 技术栈 | 说明 |
|-----|--------|------|
| 前端 | Vanilla JS / Vite / Tailwind CSS | 工作台与交互层 |
| 后端 | TypeScript / Fastify / TypeORM | API与领域服务 |
| 数据 | PostgreSQL / Redis / Milvus / MinIO | 数据与向量存储 |
| 监控 | Prometheus / Grafana | 指标与告警 |
| AI | LLM API / 向量检索 | 智能能力支持 |

---

## 六、产品演进路线

### 6.1 产品生命周期规划（阶段制）

```
阶段一（2026 Q1）: 工作台骨架可用
阶段二（2026 Q2）: 智能化增强
阶段三（2026 Q3-Q4）: 运营管理闭环
```

### 6.2 产品演进策略

- 阶段一: 先跑通对话处理闭环（对话/客户/基础平台能力）
- 阶段二: 引入自动沉淀与智能质检（知识沉淀/质检自动化/任务解析）
- 阶段三: 完整运营闭环（需求检测/报表中心/工具中心/审计合规）

### 6.3 里程碑目标（示例）

| 阶段 | 目标产出 | 关键里程碑 |
|---|---|---|
| 阶段一 | 工作台主流程可用 | 对话列表/抽屉/客户画像可用 |
| 阶段二 | 智能化能力落地 | 知识沉淀与质检报告达标 |
| 阶段三 | 运营闭环形成 | 需求检测与报表联动 |

### 6.4 非功能指标对齐（阶段目标）

| 指标 | 阶段一目标 | 阶段二目标 | 阶段三目标 |
|-----|-----------|-----------|-----------|
| 首屏加载 | <3秒 | <2秒 | <1.5秒 |
| 知识检索 | <2秒 | <1秒 | <800ms |
| 质检响应 | <5秒 | <3秒 | <2秒 |
| WebSocket延迟 | <500ms | <300ms | <200ms |

---

## 七、附录

### 7.1 文档关联关系

```
本文档 (产品顶层方案设计)
        ↓ 细化
[技术架构设计文档] (DDD架构详解、技术实现细节)
        ↓ 指导
[产品落地规划] (迭代版本、建设里程碑、实施计划)
        ↓ 实施
[功能PRD文档] (对话管理PRD、知识管理PRD、质检PRD等)
```

### 7.2 更新日志

| 版本 | 日期 | 修订内容 | 作者 |
|-----|------|---------|------|
| v1.6 | 2026-01-14 | 按备份深度细化并修正现状口径 | 产品架构团队 |
| v1.0 | 2026-01-14 | 初版创建 | 产品架构团队 |

### 7.3 审阅与反馈

- **目标读者**: 产品团队、技术团队、管理层
- **审阅周期**: 每季度回顾一次
- **反馈渠道**: product-feedback@company.com

---

**文档所有者**: 产品架构团队
**最后更新**: 2026-01-14
**下次评审**: 2026-04-14
