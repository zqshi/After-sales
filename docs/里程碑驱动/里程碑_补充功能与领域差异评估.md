# 里程碑补充功能与领域差异评估

> 生成时间：2026-02-05  
> 信息来源：`docs/里程碑驱动/*` 与 `docs/domain/*`（以代码对齐报告为主）

## 1. 里程碑驱动文档综述

已覆盖的里程碑文档类型与用途如下：
- `里程碑.md`：阶段目标、验收标准与交付物清单。
- `里程碑-功能表格.md`：V1.0/V2.0/V3.0 功能点基线表。
- `阶段X_功能表格对齐情况.md`：基于代码实现的功能点对齐结论。
- `阶段X对比报告_代码实现.md`：按里程碑条目逐条对齐、列出缺口与代码证据。
- `阶段X_领域范围与架构图.md`：基于 `docs/domain` 的领域范围与架构/时序图。

## 2. 代码级检测项目（来自对比报告）

代码级检测的统一口径与边界如下：
- 依据：里程碑条目与功能表格对齐。
- 方法：代码检索 + 关键路径阅读。
- 范围：`backend/`、`assets/`、`agentscope-service/`、`tests/`、`scripts/`（各阶段报告略有差异）。
- 约束：仅以代码可执行路径判断，不采信文档性结论。
- 测试记录：阶段一报告记录了构建与测试通过；阶段二、三未执行构建与测试。

阶段性结论（摘录）：
- 阶段一：对话闭环与基础 AI 辅助链路具备；企微真实接入、外部画像联动、质量总评分与稳定性验收缺失。
- 阶段二：知识管理与质检链路具备；自动沉淀、规则化过程质检、覆盖率与总评分验收缺失。
- 阶段三：报表摘要链路具备；AI 托管、AI 周报/月报、运营闭环与稳定性验收缺失。

## 3. 里程碑之外已实现的补充功能

结合对比报告与领域设计文档，存在以下“超出里程碑条目明示范围”的功能实现或基础能力：

1. 需求与任务流转链路
- 需求识别与状态流转（Requirement domain）。
- 自动任务创建与任务状态机（Task domain）。

2. 问题管理与质检触发
- 问题识别与问题状态流转（Problem domain）。
- 问题解决事件触发质检报告（ProblemResolvedEvent → Quality）。

3. 人工审核与人机协同
- AI 建议的人工审核流与人审协作（Review domain）。

4. 审计与报表摘要能力
- 审计事件与报表摘要 API（Audit/Report Summary）。
- 报表中心前端入口与数据聚合视图（Reports UI）。

5. AI 能力域的独立封装
- 情绪/意图/摘要/建议等 AI 能力通过独立 AI Analysis 能力域呈现。

说明：上述能力在阶段范围图与领域文档中有明确建模，但未被里程碑条目逐一列为核心功能点或验收标准。

## 4. 领域设计与里程碑覆盖差异评估

### 4.1 领域与里程碑的匹配关系

| 领域 | 里程碑是否显式包含 | 说明 |
| --- | --- | --- |
| Conversation | 是 | 阶段一核心目标与功能点 |
| Customer | 是 | 客户信息面板 |
| Knowledge | 是 | 阶段二知识管理 |
| Quality | 是 | 阶段二服务质检 |
| AI Analysis | 部分 | 里程碑以 AI Agent/AI 辅助描述，未拆分独立能力域 |
| System | 部分 | 里程碑在阶段二/三以“基础能力/监控告警/合规”表述 |
| Requirement | 否 | 未在里程碑功能表或验收条目中单列 |
| Task | 否 | 未在里程碑功能表或验收条目中单列 |
| Problem | 否 | 未在里程碑功能表或验收条目中单列 |
| Review | 否 | 未在里程碑功能表或验收条目中单列 |

### 4.2 不在里程碑中的领域（需明确边界）

以下领域在 `docs/domain` 中有完整设计，但不属于里程碑条目明确范围：
- Requirement
- Task
- Problem
- Review

建议：将上述领域明确标注为“里程碑外的基础能力或依赖域”，避免验收时误认为核心交付。

## 5. 里程碑外领域说明（描述/用途/代码实现功能）

### 5.1 Requirement

**描述**
- 负责需求识别、优先级与状态流转，并与对话/客户关联。
- 不负责任务执行、对话消息存储（通过事件/应用服务协作）。

**用途**
- 将对话中的需求结构化管理，形成可追踪的需求池与状态链路。

**代码实现功能**
- 后端：需求创建、列表/详情查询、状态更新、忽略与删除接口设计。
- 前端：需求列表/筛选/详情展示与状态更新交互。
- 设计文档：`docs/domain/backend/requirement/README.md`、`docs/domain/frontend/requirement/README.md`。

**备注**
- 后续与 `ezOne` 对接时需基于真实接口进行字段与结构适配，可能涉及请求/响应 DTO 与状态枚举的改造。

### 5.2 Task

**描述**
- 负责任务生命周期、指派、状态流转与完成评分（可选）。
- 可关联需求/对话，但不负责需求识别或对话消息管理。

**用途**
- 将需求或对话触发的处理动作落地为可执行任务/工单，形成执行闭环。

**代码实现功能**
- 后端：任务创建、指派、状态更新、完成与动作入口接口设计。
- 前端：任务看板/列表/详情展示与指派、状态切换操作。
- 设计文档：`docs/domain/backend/task/README.md`、`docs/domain/frontend/task/README.md`。

**备注**
- 任务逻辑为预留项，待数据进一步完善后，通过驱动 Agent 实现平台智能化。

### 5.3 Problem

**描述**
- 负责“问题”实体生命周期（新建、流转、解决、重开）。
- 由对话/AI 识别触发创建，与需求/任务协作但不替代其职责。

**用途**
- 将对话中的问题作为独立对象管理，并作为质检触发依据。

**代码实现功能**
- 后端：问题创建/列表/详情、状态更新接口设计，支持 IM 会话问题查询。
- 前端：问题列表与状态展示、状态变更入口；Chat 侧使用 `/im/*`。
- 设计文档：`docs/domain/backend/problem/README.md`、`docs/domain/frontend/problem/README.md`。

### 5.4 Review

**描述**
- 负责 AI 建议的人工审核流程（请求创建、通过/驳回、审核意见）。
- 不负责对话消息持久化与 AI 生成逻辑（由对话/AI 服务承担）。

**用途**
- 在 AI 建议需人工把关时，提供审核闭环与人机协作路径。

**代码实现功能**
- 后端：审核请求创建/完成接口，含 IM 侧提交与待审流接口。
- 前端：审核 UI 渲染与审批交互；Chat 侧 `/im/reviews/*`，后台 `/api/reviews`。
- 设计文档：`docs/domain/backend/review/README.md`、`docs/domain/frontend/review/README.md`。

**备注**
- 待知识实现自动沉淀逻辑时，部分阈值未达预期需人工审核，此处预留逻辑。

## 6. 可选后续动作

如需进一步精确化，可补充两类产物：
1. 将“补充功能”纳入 `里程碑-功能表格.md` 的扩展列，标注“非验收项/支撑能力”。
2. 为里程碑外领域新增“验收排除条款”或“依赖域说明”，避免范围漂移。
