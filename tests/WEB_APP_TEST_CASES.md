# 智能售后工作台 Web 端测试用例（全面版）

目标：以当前 Web 端已实现功能为准，覆盖核心路径、边界与异常场景，便于指导自动化测试。
范围：登录/会话、权限/RBAC、对话/IM、客户画像、需求、任务、知识库、AI、工具箱、报表、审计、监控、基础健康、容错与安全。

## 1. 登录与会话

### 用户故事
作为客服，我需要使用账号登录系统，以便访问工作台和业务功能。

### 验收标准
- 支持邮箱或手机号登录，失败提示明确
- 登录成功写入 token 并可访问工作台
- token 失效会跳回登录页

### 测试用例
1.1 使用有效账号/密码登录成功，跳转到 `app.html`，本地存储存在 `authToken`
1.2 使用错误密码登录失败，提示“登录失败”或后端错误信息
1.3 清空 token 后刷新工作台，自动跳转登录页
1.4 过期 token 调用任意 API 返回 401，前端清理本地存储并跳转登录
1.5 支持手机号登录（如有手机号账号）
1.6 登录后用户信息展示正确（头像/姓名）
1.7 退出登录清理本地存储并回到登录页
1.8 API 网络异常时登录提示“无法连接认证服务”

### 按钮级用例
1.B1 点击“进入工作台”按钮触发登录请求并禁用按钮直到响应
1.B2 点击“一键填入演示账号”后账号/密码输入框自动填充

### 输入校验规则
1.V1 账号为空提示“请输入账号”
1.V2 账号非邮箱/手机号格式提示“账号格式需为邮箱或手机号”
1.V3 密码为空提示“请输入密码”
1.V4 密码不足 8 位提示“密码至少 8 位”
1.V5 密码不含大小写/数字提示“密码需包含大小写字母与数字”
1.V6 邮箱正则满足 `[^\\s@]+@[^\\s@]+\\.[^\\s@]+`
1.V7 手机号正则满足 `^1[3-9]\\d{9}$`
1.V8 密码长度上限 64（超出提示错误）

### 可访问性
1.A11y1 输入框存在 `label` 且 `aria-describedby` 指向错误提示
1.A11y2 错误提示出现时读屏可读（role/aria-live）

### 性能基线
1.P1 登录请求 95% 响应 < 2s

### 异常返回码映射
1.E1 400 -> 表单错误提示（字段级或通用错误）
1.E2 401 -> 账号或密码错误提示
1.E3 403 -> 账号被禁用提示
1.E4 500 -> “服务暂不可用”提示

自动化建议：Playwright/ Cypress 通过登录 API 获取 token 并注入 localStorage，断言跳转与用户信息显示。

---

## 2. 权限体系（RBAC）

### 用户故事
作为管理员，我可以查看/控制权限范围；作为普通客服，仅可访问授权模块。

### 验收标准
- 后端根据角色返回权限集
- 前端权限面板与后端权限同步
- 无权限按钮/入口被隐藏或禁用

### 测试用例
2.1 `GET /api/v1/session/permissions` 返回角色与权限数组
2.2 管理员可访问“权限”tab，客服不可见（UI 隐藏）
2.3 无权限操作接口返回 403
2.4 切换角色后权限 UI 及时更新
2.5 权限面板本地改动不影响后端权限结果
2.6 未登录访问权限接口返回 401

### 按钮级用例
2.B1 权限面板“保存变更”按钮在无改动时不可用
2.B2 权限面板“保存变更”点击后提示保存成功

### 输入校验规则
2.V1 角色名为空不允许保存
2.V2 成员名为空不允许保存
2.V3 角色名长度 2-30
2.V4 成员名长度 2-30

### 可访问性
2.A11y1 权限复选框可键盘操作（Tab/Space）

### 性能基线
2.P1 权限面板打开 < 1s

### 异常返回码映射
2.E1 401 -> 跳转登录
2.E2 403 -> 提示权限不足

自动化建议：接口测试断言 403；UI 测试断言 `data-permission` 元素显示状态。

---

## 3. 对话列表与会话（消息页）

### 用户故事（页面视角）
作为客服，我需要查看对话列表并进入对话处理客户问题。

### 验收标准
- 对话列表可加载，点击后渲染会话
- 会话切换后客户画像与对话内容同步更新
- 支持模式切换（auto/supervised/human）

### 测试用例（页面/流程）
3.0 进入“消息”页默认展示对话列表与会话区，列表第一项默认高亮
3.1 对话列表加载成功（mock 或后端），每项包含客户名/摘要/更新时间/渠道
3.2 点击对话项，高亮切换，消息区加载对应历史消息
3.3 对话项点击后右侧客户信息同步更新
3.4 输入搜索关键词，列表按客户/摘要过滤，清空后恢复全量
3.5 切换筛选条件（状态/渠道）后列表刷新
3.6 未读数在进入会话后清零（或减少）并更新 UI
3.7 会话关闭后从“进行中”列表移除或状态变更
3.8 发送消息：输入非空内容后可发送，发送后消息显示在列表底部
3.9 发送空消息/超长消息被前端拦截或后端返回 400
3.10 附件/表情/提及按钮点击有响应（弹窗/占位提示）
3.11 快捷操作（需求检测/回复建议/创建工单）按钮可点击
3.12 切换 Agent 模式按钮显示当前模式高亮
3.13 切换模式时 UI 状态立即更新且提示成功
3.14 AI 面板开关可正常展开/收起
3.15 网络异常时列表和消息区显示降级提示

### 接口测试用例（保留）
3.A `GET /im/conversations` 返回列表并渲染
3.B `GET /im/conversations/:id/messages` 返回消息并渲染
3.C `PATCH /im/conversations/:id/mode` 设置模式成功
3.D `POST /im/conversations/:id/messages` 发送消息成功

### 按钮级用例
3.B1 点击“Agent自动/监督/人工优先”按钮切换模式
3.B2 点击“话术优化”按钮触发提示/占位逻辑
3.B3 点击“发送”按钮发送当前输入框内容
3.B4 点击“提及/表情/附件”按钮弹出选择器或提示
3.B5 点击“创建工单/生成故障报告/辅助排查”打开对应弹窗

### 输入校验规则
3.V1 发送内容为空禁止发送
3.V2 消息长度超过限制提示错误（若有限制）
3.V3 选择附件超出限制提示错误
3.V4 消息长度上限 2000 字（超出提示错误）
3.V5 模式枚举仅允许 `agent_auto/agent_supervised/human_first`

### 可访问性
3.A11y1 消息输入框支持 Enter 发送、Shift+Enter 换行
3.A11y2 会话列表项可键盘聚焦并 Enter 选中

### 性能基线
3.P1 对话列表加载 < 2s
3.P2 切换会话 95% < 1s

### 异常返回码映射
3.E1 400 -> 参数错误提示
3.E2 401 -> 跳转登录
3.E3 403 -> 权限不足提示
3.E4 404 -> 会话不存在提示
3.E5 500 -> 展示“消息发送失败”

自动化建议：接口 mock 或预置数据，断言 DOM 渲染与 API 调用。

---

## 4. 客户画像（消息页右侧面板）

### 用户故事（页面视角）
作为客服，我需要查看客户画像与互动记录，辅助判断优先级。

### 验收标准
- 客户详情能从 `/api/customers/:id` 拉取
- 互动记录从 `/api/customers/:id/interactions` 拉取
- 数据为空时有合理兜底显示

### 测试用例（页面/流程）
4.0 切换对话时画像面板刷新且不闪烁
4.1 画像卡片展示姓名/联系方式/标签/健康度/客户等级
4.2 联系方式缺失时显示“-”而不崩溃
4.3 关键指标（满意度/工单/时长）显示合理格式
4.4 服务记录列表存在时可展开/收起
4.5 互动记录按时间倒序显示
4.6 风险等级/客户等级显示色彩正确
4.7 customerId 错误时提示并降级为本地 mock
4.8 刷新画像操作后更新时间变化
4.9 无互动记录时显示空状态

### 接口测试用例（保留）
4.A `GET /api/customers/:id` 返回画像
4.B `GET /api/customers/:id/interactions` 返回互动记录
4.C `POST /api/customers/:id/refresh` 刷新画像成功

### 按钮级用例
4.B1 点击“刷新画像”按钮触发刷新并显示加载态
4.B2 互动记录筛选按钮切换后列表更新

### 输入校验规则
4.V1 刷新请求中 source 为空返回 400
4.V2 customerId 格式满足 `^cust-\\d{3}$`（当前示例）

### 可访问性
4.A11y1 画像卡片标题层级正确（h2/h3）

### 性能基线
4.P1 画像加载 < 1.5s

### 异常返回码映射
4.E1 400 -> 参数错误提示
4.E2 401 -> 跳转登录
4.E3 403 -> 权限不足提示
4.E4 404 -> 客户不存在提示

---

## 5. 需求管理（需求侧栏/面板）

### 用户故事（页面视角）
作为客服，我需要查看需求池并将客户诉求转为需求卡片。

### 验收标准
- 需求列表与统计可从 API 拉取
- 可以创建需求、忽略需求
- 状态更新与统计同步

### 测试用例（页面/流程）
5.0 打开需求面板显示统计卡片、处理/未处理列表
5.1 统计卡片与饼图展示数量与占比
5.2 切换筛选（状态/优先级）列表更新
5.3 点击“扫描需求”触发本地解析或调用接口
5.4 未处理需求点击“创建卡片”转入已处理列表
5.5 未处理需求点击“忽略”从列表移除
5.6 已处理需求点击“查看详情”弹窗显示内容
5.7 空列表显示空态提示
5.8 接口失败时使用本地 mock 展示

### 接口测试用例（保留）
5.A `GET /api/requirements` 返回列表并渲染
5.B `GET /api/requirements/statistics` 返回统计并更新图表
5.C `POST /api/requirements` 创建成功
5.D `POST /api/requirements/:id/ignore` 忽略成功
5.E `PATCH /api/requirements/:id/status` 状态更新成功
5.F `DELETE /api/requirements/:id` 删除成功

### 按钮级用例
5.B1 “需求刷新”按钮触发重新拉取列表
5.B2 “需求扫描”按钮触发扫描或提示
5.B3 “创建卡片/忽略”按钮点击后列表更新
5.B4 “查看详情”按钮打开详情弹窗

### 输入校验规则
5.V1 创建需求标题为空提示错误
5.V2 优先级/类别不在枚举内提示错误
5.V3 标题长度 2-200
5.V4 分类枚举：feature/bug/improvement/question
5.V5 状态枚举：pending/approved/resolved/ignored/cancelled

### 可访问性
5.A11y1 统计图表有替代文本或标题

### 性能基线
5.P1 需求列表加载 < 2s

### 异常返回码映射
5.E1 400 -> 参数错误提示
5.E2 401 -> 跳转登录
5.E3 403 -> 权限不足提示
5.E4 404 -> 需求不存在提示

---

## 6. 任务与工单（任务页）

### 用户故事（页面视角）
作为客服/主管，我需要创建任务并跟踪状态。

### 验收标准
- 任务列表支持分页与筛选
- 任务可分配、更新状态、完成

### 测试用例（页面/流程）
6.0 进入任务页默认展示任务列表、筛选、批量操作按钮
6.1 任务列表按更新时间排序，状态/优先级标签显示正确
6.2 过滤条件变更后列表刷新
6.3 点击任务进入详情抽屉，展示描述与关联对话
6.4 创建任务表单校验必填字段
6.5 分配任务给客服后 UI 刷新
6.6 更新状态后列表状态变化
6.7 完成任务后显示质检评分
6.8 空列表显示空态提示
6.9 无权限按钮隐藏或禁用

### 接口测试用例（保留）
6.A `GET /api/tasks` 返回列表并渲染
6.B `POST /api/tasks` 创建任务成功
6.C `POST /api/tasks/:id/assign` 分配成功
6.D `PATCH /api/tasks/:id/status` 更新状态成功
6.E `POST /api/tasks/:id/complete` 完成任务成功
6.F `POST /api/tasks/:id/actions` 行为变更成功

### 按钮级用例
6.B1 “新建任务”按钮打开创建表单
6.B2 “分配”按钮弹出分配选择器
6.B3 “开始/完成/取消”按钮更新状态
6.B4 “导出”按钮触发导出提示

### 输入校验规则
6.V1 任务标题为空提示错误
6.V2 质量评分超范围提示错误
6.V3 标题长度 2-200
6.V4 状态枚举：pending/in_progress/completed/cancelled
6.V5 质量评分范围 0-100

### 可访问性
6.A11y1 任务列表支持键盘上下选择

### 性能基线
6.P1 任务列表加载 < 2s

### 异常返回码映射
6.E1 400 -> 参数错误提示
6.E2 401 -> 跳转登录
6.E3 403 -> 权限不足提示
6.E4 404 -> 任务不存在提示

---

## 7. 知识库管理（知识页）

### 用户故事（页面视角）
作为知识管理员，我需要创建/编辑/删除知识条目与文档。

### 验收标准
- 可检索知识条目并打开详情
- 支持创建/更新/删除（如有权限）

### 测试用例（页面/流程）
7.0 进入知识管理页默认展示左侧分类树、右侧文档列表、顶部搜索框
7.1 左侧分类树默认选中“全部/默认分类”，右侧展示该分类下知识
7.2 新建分类：点击“新增分类”后输入名称，校验空值不允许保存
7.3 新建分类成功后在树中出现，且默认聚焦到新分类
7.4 重复分类名提示错误，不创建
7.5 选择分类节点后右侧列表过滤为该分类内容
7.6 选择“全部”节点后右侧列表恢复全量
7.7 分类切换时右侧列表分页/滚动状态重置
7.8 分类切换后右侧统计卡片/数量同步更新
7.9 分类删除：确认弹窗后删除成功，右侧列表回到“全部”
7.10 分类删除后其知识自动迁移到“未分类/默认分类”
7.11 右侧文档搜索：输入关键词，列表实时过滤
7.12 清空搜索条件后列表恢复
7.13 文档详情：点击列表项展示详情面板，内容/标签/更新时间正确
7.14 文档创建：打开创建弹窗，填写标题/内容/分类，保存成功
7.15 文档创建后默认出现在当前分类列表首位
7.16 文档编辑：修改标题/内容后保存，列表与详情同步更新
7.17 文档删除：确认删除后列表移除
7.18 文档上传：上传后进度显示，成功后列表出现新文档
7.19 上传失败时提示错误并可重试
7.20 FAQ 创建：新增 FAQ 后在 FAQ 列表出现
7.21 FAQ 相似问题添加成功后可在详情看到相似问题列表
7.22 FAQ 搜索为空时显示空态提示
7.23 文档/FAQ 权限不足时按钮隐藏或置灰
7.24 后端接口异常时页面降级提示但不崩溃

### 接口测试用例（保留）
7.A `GET /api/knowledge` 返回列表（分页/筛选）并渲染
7.B `GET /api/knowledge/:id` 返回详情（含元数据字段）
7.C `POST /api/knowledge` 创建成功并返回新 ID
7.D `PATCH /api/knowledge/:id` 更新成功并返回最新版本
7.E `DELETE /api/knowledge/:id` 删除成功（再次查询返回 404）
7.F `POST /api/knowledge/search` 搜索返回匹配结果（关键词/分类）
7.G `POST /api/knowledge/upload` 上传成功返回任务或文档信息
7.H `GET /api/knowledge/:id/progress` 返回处理进度

### 按钮级用例
7.B1 “新增分类”按钮打开创建弹窗
7.B2 “新增文档/FAQ”按钮打开创建弹窗
7.B3 “上传文档”按钮触发文件选择器
7.B4 “保存/删除”按钮执行操作并提示结果
7.B5 “相似问题添加”按钮新增条目

### 输入校验规则
7.V1 分类名称为空提示错误
7.V2 文档标题为空提示错误
7.V3 FAQ 问题为空提示错误
7.V4 上传文件类型/大小不符合提示错误
7.V5 标题长度 2-200
7.V6 分类名称长度 2-40

### 可访问性
7.A11y1 分类树可键盘展开/折叠
7.A11y2 上传按钮可键盘触发

### 性能基线
7.P1 知识列表加载 < 2s

### 异常返回码映射
7.E1 400 -> 参数错误提示
7.E2 401 -> 跳转登录
7.E3 403 -> 权限不足提示
7.E4 404 -> 知识不存在提示

---

## 8. 知识应用（知识应用页）

### 用户故事（页面视角）
作为客服，我需要从知识库检索并引用内容以辅助回复客户。

### 验收标准
- 知识搜索返回结果并可预览
- 复制/引用内容可反馈提示

### 测试用例（页面/流程）
8.0 进入知识应用页默认聚焦搜索输入框
8.1 输入关键字并回车/点击搜索触发请求
8.2 搜索结果列表包含标题/分类/评分
8.3 点击结果展示详情/预览区
8.4 复制/引用按钮可用并提示成功
8.5 清空搜索后结果列表恢复初始状态
8.6 搜索无结果时显示空态提示
8.7 快捷入口点击后插入到输入框或复制到剪贴板

### 接口测试用例（保留）
8.A `POST /api/knowledge/search` 按关键词返回结果
8.B `GET /api/knowledge/:id` 返回知识内容可预览

### 语义检索测试用例
8.S1 输入同义词关键词（如“无法登录/登录失败”），返回相同主题结果
8.S2 输入长句自然语言问题，返回相关知识
8.S3 输入包含错别字/简写的关键词，仍能召回相关知识
8.S4 输入中英文混合关键词，结果包含目标知识
8.S5 语义检索返回结果排序符合相关度优先
8.S6 语义检索结果数量为 0 时显示“未找到相关知识”

### 多路召回策略测试用例
8.R1 关键字召回返回 topN 与语义召回 topN 合并去重
8.R2 多路召回合并后按照综合评分排序
8.R3 当语义召回不可用时仅走关键字召回并提示降级
8.R4 当关键字召回为空时语义召回仍能返回结果
8.R5 多路召回结果中知识来源/类型标记正确
8.R6 召回结果命中缓存时响应时间明显降低

### 按钮级用例
8.B1 “搜索”按钮触发检索
8.B2 “复制/引用”按钮提示成功
8.B3 “快捷入口”按钮插入文本

### 输入校验规则
8.V1 搜索关键词为空不触发请求或提示
8.V2 搜索关键词长度上限 100

### 可访问性
8.A11y1 搜索框有可见 label 或 aria-label

### 性能基线
8.P1 搜索响应 95% < 1.5s

### 异常返回码映射
8.E1 400 -> 参数错误提示
8.E2 401 -> 跳转登录
8.E3 500 -> “检索失败”提示

---

## 9. AI 辅助（AI 面板）

### 用户故事（页面视角）
作为客服，我希望获得 AI 分析和建议。

### 验收标准
- AI 分析接口响应并渲染
- 情绪分析显示在对话列表

### 测试用例（页面/流程）
9.0 打开 AI 面板后自动拉取分析数据
9.1 面板展示情绪/需求/建议模块
9.2 点击“采纳建议”将内容写入输入框
9.3 切换对话后 AI 面板自动刷新
9.4 失败时显示降级提示，不阻塞其他功能

### 接口测试用例（保留）
9.A `GET /im/conversations/:id/ai-analysis` 返回分析结果
9.B `POST /ai/analyze` 返回分析摘要
9.C `GET /im/conversations/:id/sentiment` 返回情绪

### 按钮级用例
9.B1 “采纳建议”按钮将内容写入输入框
9.B2 “重新分析”按钮触发重新请求

### 输入校验规则
9.V1 分析上下文为空时提示或使用默认上下文
9.V2 模型名称仅允许允许列表值

### 可访问性
9.A11y1 AI 面板展开时焦点在面板内

### 性能基线
9.P1 AI 分析返回 < 3s

### 异常返回码映射
9.E1 400 -> 参数错误提示
9.E2 401 -> 跳转登录
9.E3 500 -> AI 分析失败提示

---

## 10. 工具箱（运维/报表/告警）

### 用户故事（页面视角）
作为管理员，我需要查看服务状态与生成报告。

### 验收标准
- 服务状态能拉取告警列表
- 生成报告拉取审计汇总

### 测试用例（页面/流程）
10.0 进入工具页展示功能入口卡片
10.1 点击“服务状态监控”打开监控弹窗
10.2 弹窗展示服务列表与告警列表
10.3 点击“已处理”后告警移除且提示成功
10.4 点击“生成报告”打开审计汇总弹窗
10.5 “数据库管理/登录诊断/查询日志”弹窗可打开
10.6 无告警时显示空状态
10.7 无权限入口隐藏或提示

### 接口测试用例（保留）
10.A `GET /monitoring/alerts` 返回告警列表并渲染
10.B `PATCH /monitoring/alerts/:id/resolve` 处理告警成功
10.C `GET /audit/reports/summary` 返回审计汇总并渲染
10.D `POST /monitoring/alerts` 创建告警成功

### 按钮级用例
10.B1 “服务状态监控”按钮打开弹窗
10.B2 “已处理”按钮调用 resolve 接口
10.B3 “生成报告”按钮拉取审计汇总

### 输入校验规则
10.V1 创建告警标题为空提示错误
10.V2 告警级别枚举：info/warning/critical

### 可访问性
10.A11y1 告警列表有空态提示可读

### 性能基线
10.P1 告警列表加载 < 2s

### 异常返回码映射
10.E1 401 -> 跳转登录
10.E2 403 -> 权限不足提示
10.E3 500 -> “服务状态获取失败”提示

---

## 11. 报表（报表页）

### 用户故事（页面视角）
作为主管，我需要查看关键指标趋势图。

### 验收标准
- 报表图表渲染正常
- 数据为空时不崩溃

### 测试用例（页面/流程）
11.0 进入报表页默认展示图表与指标卡
11.1 图表渲染正常且响应式缩放
11.2 切换 tabs 后内容不串页
11.3 Chart.js 未加载时页面不报错

### 按钮级用例
11.B1 报表页切换按钮高亮正确

### 异常返回码映射
11.E1 图表数据为空时显示“暂无数据”

### 可访问性
11.A11y1 图表容器有描述性标题

### 性能基线
11.P1 报表页面渲染 < 2s

---

## 12. 审计与监控后台接口

### 用户故事（页面视角）
作为管理员，我需要审计日志和告警可追踪。

### 验收标准
- 写操作自动产生日志
- 审计汇总可统计

### 测试用例（页面/流程）
12.1 任意写操作后，`/audit/reports/summary` 总数递增
12.2 `POST /audit/events` 可手动写入日志
12.3 `POST /monitoring/alerts` 创建告警成功
12.4 审计汇总按 days 参数变化
12.5 审计写操作不记录读取请求

### 输入校验规则
12.V1 审计事件 action/resource 为空返回 400
12.V2 action 枚举为 HTTP 方法（GET/POST/PATCH/DELETE）

### 性能基线
12.P1 审计汇总接口响应 < 1s

### 异常返回码映射
12.E1 401 -> 跳转登录
12.E2 403 -> 权限不足提示

---

## 13. 健康检查与监控

### 用户故事（页面视角）
作为运维，我需要确认服务健康状态。

### 验收标准
- `/health` 返回健康状态
- `/metrics` 返回 Prometheus 指标

### 测试用例（页面/流程）
13.1 `/health` 返回 status=healthy
13.2 `/metrics` 返回内容类型 `text/plain`

### 异常返回码映射
13.E1 /metrics 失败返回 500 并记录错误

### 性能基线
13.P1 健康检查响应 < 200ms

---

## 14. 权限面板功能完整性（权限页）

### 用户故事（页面视角）
作为管理员，我需要在权限面板中查看成员/角色并修改权限。

### 验收标准
- 角色与成员列表显示正确
- 权限勾选变化可保存并提示

### 测试用例（页面/流程）
14.0 打开权限页展示成员列表与角色面板
14.1 成员列表搜索关键字正确过滤
14.2 切换成员后右侧角色与权限同步
14.3 选择不同角色权限列表更新
14.4 勾选权限后保存按钮变为“保存变更*”
14.5 保存权限后提示成功并更新预览
14.6 未登录访问权限面板被限制

### 按钮级用例
14.B1 “新增角色”按钮打开弹窗
14.B2 “新增成员”按钮打开弹窗

### 输入校验规则
14.V1 角色名为空禁止保存
14.V2 成员名为空禁止保存
14.V3 角色描述长度 0-100

### 可访问性
14.A11y1 权限列表支持键盘导航

### 性能基线
14.P1 权限页渲染 < 1.5s

---

## 15. 工具箱快捷动作

### 用户故事（页面视角）
作为客服，我需要使用工具箱快捷操作辅助处理问题。

### 验收标准
- 操作按钮可打开对应弹窗
- 提交后反馈提示正确

### 测试用例（页面/流程）
15.1 “发送系统通知”弹窗可打开并提交
15.2 “创建事件工单”提交后提示成功
15.3 “升级问题”提交后提示成功
15.4 “查询日志/登录诊断”弹窗展示内容
15.5 关闭弹窗按钮可正常关闭

### 输入校验规则
15.V1 通知标题/内容为空提示错误
15.V2 工单标题为空提示错误
15.V3 升级原因为空提示错误
15.V4 文本输入长度上限 500

### 可访问性
15.A11y1 弹窗可通过 ESC 关闭

### 性能基线
15.P1 弹窗打开 < 300ms

---

## 16. 运行时配置与代理

### 用户故事（页面视角）
作为运维，我需要通过 runtime-config 配置 API 地址。

### 验收标准
- runtime-config 覆盖默认 API 地址
- 代理与直连都可正常访问

### 测试用例（页面/流程）
16.1 修改 `public/runtime-config.js` 后 API 请求走新地址
16.2 Vite 代理 `/api/v1` 转发成功
16.3 无 API 配置时提示 “API not configured”

### 异常返回码映射
16.E1 代理异常时提示“网络异常”

### 性能基线
16.P1 首次加载 runtime-config 不阻塞首屏

---

## 17. 可靠性与异常处理

### 用户故事（页面视角）
作为用户，即使接口异常系统也能给出可理解提示。

### 验收标准
- API 失败展示降级内容或提示
- 重试与超时机制生效

### 测试用例（页面/流程）
17.1 API 500 时自动重试 3 次
17.2 超时后提示 “Request timeout”
17.3 JSON 解析异常时提示明确错误
17.4 断网时显示“网络异常”提示

### 异常返回码映射
17.E1 408/504 -> 超时提示
17.E2 429 -> 限流提示

### 可访问性
17.A11y1 错误提示可被读屏器读取

### 性能基线
17.P1 重试总耗时 < 8s

---

## 自动化执行建议

- API 测试：Supertest 或 Postman/Newman
- UI 测试：Playwright（推荐）
- 数据准备：使用 SQL 种子脚本 + 独立测试库
- 运行顺序：登录 -> 会话 -> 客户/需求/任务 -> 知识库 -> AI -> 工具箱 -> 报表 -> 审计/监控
